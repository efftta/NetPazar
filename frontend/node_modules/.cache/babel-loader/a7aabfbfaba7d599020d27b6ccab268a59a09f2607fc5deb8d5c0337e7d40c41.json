{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\netpazar\\\\frontend\\\\src\\\\pages\\\\Payment.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/pages/Payment.jsx\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport { fetchUserAddresses, fetchUserPaymentMethods, addPaymentMethod } from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Payment = () => {\n  _s();\n  const {\n    cartItems,\n    total,\n    clearCart\n  } = useCart();\n  const {\n    token,\n    isAuthenticated,\n    loading: authLoading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null); // Başlangıçta null\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\");\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true);\n  const [showNewCardForm, setShowNewCardForm] = useState(false);\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false\n  });\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues,\n    trigger,\n    reset,\n    // reset fonksiyonu eklendi\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    mode: \"onChange\",\n    // Başlangıç default değerlerini burada tanımlayarak uncontrolled/controlled uyarısını önleyebiliriz\n    defaultValues: {\n      title: \"\",\n      fullName: \"\",\n      addressLine1: \"\",\n      addressLine2: \"\",\n      city: \"\",\n      state: \"\",\n      // Yeni eklenen alan\n      postalCode: \"\",\n      country: \"\",\n      phone: \"\"\n    }\n  });\n\n  // Kullanıcı ve sepet durumu kontrolü\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", {\n          replace: true\n        });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find(addr => addr.isDefault);\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr); // Varsayılanı seç\n          } else if (fetchedAddresses.length > 0) {\n            handleAddressSelect(fetchedAddresses[0]); // Yoksa ilkini seç\n          } else {\n            // Hiç adres yoksa, manuel giriş alanlarını sıfırla\n            setSelectedAddress(null);\n            reset({\n              // form alanlarını varsayılan boş değerlere sıfırla\n              title: \"\",\n              fullName: \"\",\n              addressLine1: \"\",\n              addressLine2: \"\",\n              city: \"\",\n              state: \"\",\n              postalCode: \"\",\n              country: \"\",\n              phone: \"\"\n            });\n            clearErrors(); // Tüm form hatalarını temizle\n          }\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find(pm => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard);\n          } else if (fetchedPaymentMethods.length > 0) {\n            handleSavedCardSelect(fetchedPaymentMethods[0]);\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue, clearErrors, reset]); // reset bağımlılık olarak eklendi\n\n  // Adres seçimi veya manuel giriş durumunda form hatalarını yönetir\n  const handleAddressSelect = useCallback(address => {\n    setSelectedAddress(address);\n    if (address) {\n      // Kayıtlı adres seçildiğinde manuel giriş alanlarını sıfırla ve hataları temizle\n      // reset ile form alanlarını kayıtlı adresin bilgileriyle doldur\n      reset({\n        title: address.title || \"\",\n        fullName: address.fullName || \"\",\n        addressLine1: address.addressLine1 || \"\",\n        addressLine2: address.addressLine2 || \"\",\n        city: address.city || \"\",\n        state: address.state || \"\",\n        postalCode: address.postalCode || \"\",\n        country: address.country || \"\",\n        phone: address.phone || \"\"\n      });\n      clearErrors(); // Tüm form hatalarını temizle\n    } else {\n      // Manuel giriş seçildiğinde form alanlarını boşalt\n      reset({\n        title: \"\",\n        fullName: \"\",\n        addressLine1: \"\",\n        addressLine2: \"\",\n        city: \"\",\n        state: \"\",\n        postalCode: \"\",\n        country: \"\",\n        phone: \"\"\n      });\n      clearErrors();\n    }\n  }, [setValue, clearErrors, reset]);\n  const handlePaymentMethodTypeSelect = useCallback(method => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false);\n    setVerificationCode(\"\");\n    setCodeError(\"\");\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null);\n      setShowNewCardForm(false);\n    }\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  }, [paymentMethods]);\n  const handleSavedCardSelect = useCallback(card => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\");\n    setShowNewCardForm(false);\n  }, []);\n  const handleNewCardInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (!newCardData.cardHolderName || !newCardData.cardNumber || !newCardData.expiryMonth || !newCardData.expiryYear) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault\n      };\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false);\n      setNewCardData({\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(pm => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits);\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const finalizeOrder = async shippingInfo => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map(item => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price\n        })),\n        shippingInfo: shippingInfo,\n        // Doğrudan gönderiyoruz, doğru formatta olduğunu varsayarak\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName\n          })\n        },\n        totalPrice: total,\n        status: \"pending\"\n      };\n      console.log(\"Gönderilen Sipariş Verisi:\", orderData);\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice\n        }\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInitiateOrder = async () => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n    let finalShippingInfo;\n    // Eğer kayıtlı adres seçili ise, selectedAddress'i kullan\n    if (selectedAddress) {\n      finalShippingInfo = {\n        title: selectedAddress.title,\n        fullName: selectedAddress.fullName,\n        addressLine1: selectedAddress.addressLine1,\n        addressLine2: selectedAddress.addressLine2 || \"\",\n        // Opsiyonel\n        city: selectedAddress.city,\n        state: selectedAddress.state,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone\n      };\n    } else {\n      // Kayıtlı adres seçili değilse, manuel giriş alanlarını doğrula\n      // Tüm adres alanlarını doğrula\n      const isValid = await trigger([\"title\", \"fullName\", \"addressLine1\", \"city\", \"state\", \"postalCode\", \"country\", \"phone\"]);\n      if (!isValid) {\n        setErrorMessage(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        toast.error(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        return;\n      }\n      finalShippingInfo = {\n        title: getValues(\"title\"),\n        fullName: getValues(\"fullName\"),\n        addressLine1: getValues(\"addressLine1\"),\n        addressLine2: getValues(\"addressLine2\") || \"\",\n        // Opsiyonel\n        city: getValues(\"city\"),\n        state: getValues(\"state\"),\n        postalCode: getValues(\"postalCode\"),\n        country: getValues(\"country\"),\n        phone: getValues(\"phone\")\n      };\n    }\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard && !showNewCardForm) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      if (showNewCardForm) {\n        setErrorMessage(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        toast.error(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        return;\n      }\n      setShowVerificationInput(true);\n      return;\n    }\n    await finalizeOrder(finalShippingInfo);\n  };\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") {\n      // Burası gerçek bir entegrasyonda bankadan gelen kodla doğrulanmalı\n      setShowVerificationInput(false);\n      setVerificationCode(\"\");\n      let finalShippingInfo;\n      if (selectedAddress) {\n        finalShippingInfo = {\n          title: selectedAddress.title,\n          fullName: selectedAddress.fullName,\n          addressLine1: selectedAddress.addressLine1,\n          addressLine2: selectedAddress.addressLine2 || \"\",\n          city: selectedAddress.city,\n          state: selectedAddress.state,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone\n        };\n      } else {\n        const formData = getValues(); // En güncel form verilerini al\n        finalShippingInfo = {\n          title: formData.title,\n          fullName: formData.fullName,\n          addressLine1: formData.addressLine1,\n          addressLine2: formData.addressLine2 || \"\",\n          city: formData.city,\n          state: formData.state,\n          postalCode: formData.postalCode,\n          country: formData.country,\n          phone: formData.phone\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\");\n    }\n  };\n\n  // Sipariş Onayla butonunun disable durumu\n  const isPlaceOrderButtonDisabled = loading || cartItems.length === 0 || selectedAddress === null && (\n  // Manuel giriş yapılıyorsa\n  !getValues(\"addressLine1\") ||\n  // Yeni alanları kontrol et\n  !getValues(\"fullName\") || !getValues(\"title\") || !getValues(\"state\") || !getValues(\"city\") || !getValues(\"postalCode\") || !getValues(\"country\") || !getValues(\"phone\") || Object.keys(errors).length > 0 // Formda hata varsa\n  ) || selectedPaymentMethod === \"creditCard\" && selectedSavedCard === null && !showNewCardForm;\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\",\n      children: cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-red-400\",\n        children: \"Sepetiniz bo\\u015F. L\\xFCtfen \\xF6nce \\xFCr\\xFCn ekleyin.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 44\n        }, this), \"Y\\xFCkleniyor...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-6 text-center text-purple-400\",\n        children: \"Sipari\\u015Fi Tamamla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 bg-gray-700 p-4 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4 text-green-400\",\n          children: [\"Toplam Tutar: \\u20BA\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this), \" \", errorMessage]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 13\n        }, this), \" \", codeError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleInitiateOrder),\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), \" Teslimat Adresi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), addresses.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400 mb-4\",\n            children: \"Kay\\u0131tl\\u0131 adresiniz bulunmamaktad\\u0131r. L\\xFCtfen a\\u015Fa\\u011F\\u0131daki formu doldurun.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n            children: addresses.map(addr => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedAddress && selectedAddress._id === addr._id ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"shippingAddress\",\n                value: addr._id,\n                checked: selectedAddress && selectedAddress._id === addr._id,\n                onChange: () => handleAddressSelect(addr),\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-grow\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-semibold text-lg\",\n                    children: addr.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-300 text-sm\",\n                    children: [addr.addressLine1, \" \", addr.addressLine2]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [addr.city, \", \", addr.state, \", \", addr.postalCode, \", \", addr.country]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 496,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [\"Tel: \", addr.phone]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 23\n                }, this), addr.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                  children: \"Varsay\\u0131lan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 21\n              }, this)]\n            }, addr._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-3\",\n              children: \"Veya Yeni Adres Bilgilerini Girin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"titleInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres Ba\\u015Fl\\u0131\\u011F\\u0131 (Ev/\\u0130\\u015F)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"titleInput\",\n                  type: \"text\",\n                  ...register(\"title\", {\n                    required: !selectedAddress && \"Adres başlığı zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"title\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 19\n                }, this), errors.title && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.title.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"fullNameInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Al\\u0131c\\u0131 Ad Soyad\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"fullNameInput\",\n                  type: \"text\",\n                  ...register(\"fullName\", {\n                    required: !selectedAddress && \"Ad Soyad zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"fullName\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 19\n                }, this), errors.fullName && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.fullName.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"addressLine1Input\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres Sat\\u0131r\\u0131 1 (Cadde, Sokak, No)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"addressLine1Input\",\n                  type: \"text\",\n                  ...register(\"addressLine1\", {\n                    required: !selectedAddress && \"Adres satırı 1 zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"addressLine1\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 19\n                }, this), errors.addressLine1 && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.addressLine1.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"addressLine2Input\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres Sat\\u0131r\\u0131 2 (Daire, Kat, Bina Ad\\u0131 - \\u0130ste\\u011Fe Ba\\u011Fl\\u0131)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"addressLine2Input\",\n                  type: \"text\",\n                  ...register(\"addressLine2\"),\n                  // İsteğe bağlı olduğu için required yok\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"addressLine2\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"cityInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\u015Eehir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"cityInput\",\n                  type: \"text\",\n                  ...register(\"city\", {\n                    required: !selectedAddress && \"Şehir zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"city\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 587,\n                  columnNumber: 19\n                }, this), errors.city && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.city.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"stateInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\u0130l\\xE7e / Eyalet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"stateInput\",\n                  type: \"text\",\n                  ...register(\"state\", {\n                    required: !selectedAddress && \"İlçe / Eyalet zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"state\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 19\n                }, this), errors.state && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.state.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"postalCodeInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Posta Kodu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"postalCodeInput\",\n                  type: \"text\",\n                  ...register(\"postalCode\", {\n                    required: !selectedAddress && \"Posta kodu zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"postalCode\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 19\n                }, this), errors.postalCode && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.postalCode.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"countryInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\xDClke\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"countryInput\",\n                  type: \"text\",\n                  ...register(\"country\", {\n                    required: !selectedAddress && \"Ülke zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"country\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, this), errors.country && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.country.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"phoneInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Telefon Numaras\\u0131\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"phoneInput\",\n                  type: \"text\",\n                  ...register(\"phone\", {\n                    required: !selectedAddress && \"Telefon numarası zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"phone\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 659,\n                  columnNumber: 19\n                }, this), errors.phone && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.phone.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 15\n            }, this), \" \\xD6deme Y\\xF6ntemi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"cashOnDelivery\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"cashOnDelivery\",\n                checked: selectedPaymentMethod === \"cashOnDelivery\",\n                onChange: () => handlePaymentMethodTypeSelect(\"cashOnDelivery\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kap\\u0131da \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"\\xDCr\\xFCnleri teslim al\\u0131rken nakit veya kart ile \\xF6deme yapabilirsiniz.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"creditCard\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"creditCard\",\n                checked: selectedPaymentMethod === \"creditCard\",\n                onChange: () => handlePaymentMethodTypeSelect(\"creditCard\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kredi Kart\\u0131 ile \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 717,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"Kaydedilmi\\u015F kartlar\\u0131n\\u0131zdan birini se\\xE7in veya yeni bir kart ekleyin.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this), selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold mb-3\",\n                children: \"Kay\\u0131tl\\u0131 Kartlar\\u0131m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 19\n              }, this), paymentMethods.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-400 text-sm mb-4\",\n                children: \"Hen\\xFCz kay\\u0131tl\\u0131 kart\\u0131n\\u0131z bulunmamaktad\\u0131r.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 gap-3 mb-4\",\n                children: paymentMethods.map(card => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `flex items-center p-3 border rounded-md cursor-pointer ${selectedSavedCard && selectedSavedCard._id === card._id ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\" : \"border-gray-500 hover:border-gray-400 bg-gray-600\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"savedCard\",\n                    value: card._id,\n                    checked: selectedSavedCard && selectedSavedCard._id === card._id,\n                    onChange: () => handleSavedCardSelect(card),\n                    className: \"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 737,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-grow\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: [card.cardHolderName, \" (\", card.cardType || \"Kart\", \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 746,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-300\",\n                      children: [\"**** **** **** \", card.cardNumberLast4]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 747,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-400\",\n                      children: [\"Son Kullanma: \", card.expiryMonth, \"/\", card.expiryYear]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 748,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 745,\n                    columnNumber: 27\n                  }, this), card.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                    children: \"Varsay\\u0131lan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 751,\n                    columnNumber: 29\n                  }, this)]\n                }, card._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowNewCardForm(!showNewCardForm);\n                  setSelectedSavedCard(null);\n                },\n                className: \"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 768,\n                  columnNumber: 21\n                }, this), showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 19\n              }, this), showNewCardForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-semibold mb-3\",\n                  children: \"Yeni Kart Bilgileri\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 774,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardHolderName\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart \\xDCzerindeki \\u0130sim\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 777,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardHolderName\",\n                      name: \"cardHolderName\",\n                      value: newCardData.cardHolderName,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 778,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 776,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardNumber\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart Numaras\\u0131\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 781,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardNumber\",\n                      name: \"cardNumber\",\n                      value: newCardData.cardNumber,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true,\n                      maxLength: \"16\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 782,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 780,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryMonth\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Ay (AA)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 786,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryMonth\",\n                        name: \"expiryMonth\",\n                        value: newCardData.expiryMonth,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"MM\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 787,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 785,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryYear\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Y\\u0131l (YY)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 790,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryYear\",\n                        name: \"expiryYear\",\n                        value: newCardData.expiryYear,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"YY\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 791,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 789,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center mt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"isDefaultCard\",\n                      name: \"isDefault\",\n                      checked: newCardData.isDefault,\n                      onChange: handleNewCardInputChange,\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 795,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"isDefaultCard\",\n                      className: \"ml-2 block text-sm font-medium text-gray-300\",\n                      children: \"Varsay\\u0131lan Kart Yap\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 796,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 794,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: handleSaveNewCard,\n                    disabled: loading,\n                    className: `w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`,\n                    children: [loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 799,\n                      columnNumber: 38\n                    }, this) : /*#__PURE__*/_jsxDEV(PenTool, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 799,\n                      columnNumber: 82\n                    }, this), \" Kart\\u0131 Kaydet\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 798,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 775,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this), showVerificationInput && selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 17\n            }, this), \" Kredi Kart\\u0131 G\\xFCvenlik Onay\\u0131\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300 mb-4\",\n            children: \"G\\xFCvenli\\u011Finiz i\\xE7in, kredi kart\\u0131 sahibinin kay\\u0131tl\\u0131 telefon numaras\\u0131na g\\xF6nderilen 4 haneli kodu giriniz.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 814,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            maxLength: \"4\",\n            value: verificationCode,\n            onChange: e => setVerificationCode(e.target.value),\n            placeholder: \"Onay Kodu\",\n            className: \"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\",\n            inputMode: \"numeric\",\n            pattern: \"[0-9]*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 15\n          }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-sm text-orange-400 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"mr-1\",\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 829,\n              columnNumber: 19\n            }, this), \" \", codeError]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 828,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleVerifyCode,\n            className: \"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\",\n            disabled: loading || verificationCode.length !== 4,\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 840,\n                columnNumber: 21\n              }, this), \" Do\\u011Frulan\\u0131yor...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 21\n              }, this), \" Kodu Do\\u011Frula ve Sipari\\u015Fi Onayla\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 832,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 13\n        }, this), !showVerificationInput && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isPlaceOrderButtonDisabled,\n          className: `w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${isPlaceOrderButtonDisabled ? \"bg-gray-600 cursor-not-allowed\" : \"bg-green-600 hover:bg-green-700\"}`,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 863,\n              columnNumber: 19\n            }, this), \" Sipari\\u015F Veriliyor...\"]\n          }, void 0, true) : \"Siparişi Onayla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/cart\"),\n        className: \"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"mr-2\",\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 876,\n          columnNumber: 11\n        }, this), \" Sepete Geri D\\xF6n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 872,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 444,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"JNiPAw+/cI7it+Q0VgLesSGqnj8=\", false, function () {\n  return [useCart, useAuth, useNavigate, useForm];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useCart","useAuth","createOrder","fetchUserAddresses","fetchUserPaymentMethods","addPaymentMethod","useForm","MapPin","CreditCard","Loader2","PlusCircle","PenTool","CheckCircle","XCircle","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","Payment","_s","cartItems","total","clearCart","token","isAuthenticated","loading","authLoading","navigate","addresses","setAddresses","paymentMethods","setPaymentMethods","selectedAddress","setSelectedAddress","selectedPaymentMethod","setSelectedPaymentMethod","selectedSavedCard","setSelectedSavedCard","setLoading","errorMessage","setErrorMessage","fetchingData","setFetchingData","showNewCardForm","setShowNewCardForm","newCardData","setNewCardData","cardHolderName","cardNumber","expiryMonth","expiryYear","isDefault","showVerificationInput","setShowVerificationInput","verificationCode","setVerificationCode","codeError","setCodeError","register","handleSubmit","setValue","getValues","trigger","reset","formState","errors","clearErrors","mode","defaultValues","title","fullName","addressLine1","addressLine2","city","state","postalCode","country","phone","replace","length","info","fetchData","fetchedAddresses","defaultAddr","find","addr","handleAddressSelect","fetchedPaymentMethods","defaultCard","pm","handleSavedCardSelect","err","console","error","message","address","handlePaymentMethodTypeSelect","method","card","handleNewCardInputChange","e","name","value","type","checked","target","handleSaveNewCard","cardType","test","cardToSave","updatedPaymentMethods","success","last4Digits","slice","newlyAddedCard","cardNumberLast4","finalizeOrder","shippingInfo","orderData","products","map","item","product","_id","quantity","price","discountPrice","paymentMethod","cardId","last4","totalPrice","status","log","createdOrder","orderId","handleInitiateOrder","finalShippingInfo","isValid","handleVerifyCode","formData","isPlaceOrderButtonDisabled","Object","keys","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","size","onSubmit","onChange","htmlFor","id","required","onClick","maxLength","placeholder","disabled","inputMode","pattern","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/netpazar/frontend/src/pages/Payment.jsx"],"sourcesContent":["// frontend/src/pages/Payment.jsx\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport {\n  fetchUserAddresses,\n  fetchUserPaymentMethods,\n  addPaymentMethod,\n} from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\";\nimport { toast } from \"react-toastify\";\n\nconst Payment = () => {\n  const { cartItems, total, clearCart } = useCart();\n  const { token, isAuthenticated, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null); // Başlangıçta null\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\");\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true);\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false);\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false,\n  });\n\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues,\n    trigger,\n    reset, // reset fonksiyonu eklendi\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    mode: \"onChange\",\n    // Başlangıç default değerlerini burada tanımlayarak uncontrolled/controlled uyarısını önleyebiliriz\n    defaultValues: {\n      title: \"\",\n      fullName: \"\",\n      addressLine1: \"\",\n      addressLine2: \"\",\n      city: \"\",\n      state: \"\", // Yeni eklenen alan\n      postalCode: \"\",\n      country: \"\",\n      phone: \"\",\n    },\n  });\n\n  // Kullanıcı ve sepet durumu kontrolü\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", { replace: true });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find((addr) => addr.isDefault);\n\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr); // Varsayılanı seç\n          } else if (fetchedAddresses.length > 0) {\n            handleAddressSelect(fetchedAddresses[0]); // Yoksa ilkini seç\n          } else {\n            // Hiç adres yoksa, manuel giriş alanlarını sıfırla\n            setSelectedAddress(null);\n            reset({ // form alanlarını varsayılan boş değerlere sıfırla\n              title: \"\",\n              fullName: \"\",\n              addressLine1: \"\",\n              addressLine2: \"\",\n              city: \"\",\n              state: \"\",\n              postalCode: \"\",\n              country: \"\",\n              phone: \"\",\n            });\n            clearErrors(); // Tüm form hatalarını temizle\n          }\n\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find((pm) => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard);\n          } else if (fetchedPaymentMethods.length > 0) {\n            handleSavedCardSelect(fetchedPaymentMethods[0]);\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue, clearErrors, reset]); // reset bağımlılık olarak eklendi\n\n  // Adres seçimi veya manuel giriş durumunda form hatalarını yönetir\n  const handleAddressSelect = useCallback((address) => {\n    setSelectedAddress(address);\n    if (address) {\n      // Kayıtlı adres seçildiğinde manuel giriş alanlarını sıfırla ve hataları temizle\n      // reset ile form alanlarını kayıtlı adresin bilgileriyle doldur\n      reset({\n        title: address.title || \"\",\n        fullName: address.fullName || \"\",\n        addressLine1: address.addressLine1 || \"\",\n        addressLine2: address.addressLine2 || \"\",\n        city: address.city || \"\",\n        state: address.state || \"\",\n        postalCode: address.postalCode || \"\",\n        country: address.country || \"\",\n        phone: address.phone || \"\",\n      });\n      clearErrors(); // Tüm form hatalarını temizle\n    } else {\n      // Manuel giriş seçildiğinde form alanlarını boşalt\n      reset({\n        title: \"\",\n        fullName: \"\",\n        addressLine1: \"\",\n        addressLine2: \"\",\n        city: \"\",\n        state: \"\",\n        postalCode: \"\",\n        country: \"\",\n        phone: \"\",\n      });\n      clearErrors();\n    }\n  }, [setValue, clearErrors, reset]);\n\n  const handlePaymentMethodTypeSelect = useCallback((method) => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false);\n    setVerificationCode(\"\");\n    setCodeError(\"\");\n\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null);\n      setShowNewCardForm(false);\n    }\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  }, [paymentMethods]);\n\n  const handleSavedCardSelect = useCallback((card) => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\");\n    setShowNewCardForm(false);\n  }, []);\n\n  const handleNewCardInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value,\n    });\n  };\n\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (\n        !newCardData.cardHolderName ||\n        !newCardData.cardNumber ||\n        !newCardData.expiryMonth ||\n        !newCardData.expiryYear\n      ) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";\n      else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";\n      else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault,\n      };\n\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false);\n      setNewCardData({\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false,\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(\n        (pm) => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits\n      );\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const finalizeOrder = async (shippingInfo) => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map((item) => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price,\n        })),\n        shippingInfo: shippingInfo, // Doğrudan gönderiyoruz, doğru formatta olduğunu varsayarak\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName,\n          }),\n        },\n        totalPrice: total,\n        status: \"pending\",\n      };\n\n      console.log(\"Gönderilen Sipariş Verisi:\", orderData);\n\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice,\n        },\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInitiateOrder = async () => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n\n    let finalShippingInfo;\n    // Eğer kayıtlı adres seçili ise, selectedAddress'i kullan\n    if (selectedAddress) {\n      finalShippingInfo = {\n        title: selectedAddress.title,\n        fullName: selectedAddress.fullName,\n        addressLine1: selectedAddress.addressLine1,\n        addressLine2: selectedAddress.addressLine2 || \"\", // Opsiyonel\n        city: selectedAddress.city,\n        state: selectedAddress.state,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone,\n      };\n    } else {\n      // Kayıtlı adres seçili değilse, manuel giriş alanlarını doğrula\n      // Tüm adres alanlarını doğrula\n      const isValid = await trigger([\n        \"title\",\n        \"fullName\",\n        \"addressLine1\",\n        \"city\",\n        \"state\",\n        \"postalCode\",\n        \"country\",\n        \"phone\",\n      ]);\n      if (!isValid) {\n        setErrorMessage(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        toast.error(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        return;\n      }\n      finalShippingInfo = {\n        title: getValues(\"title\"),\n        fullName: getValues(\"fullName\"),\n        addressLine1: getValues(\"addressLine1\"),\n        addressLine2: getValues(\"addressLine2\") || \"\", // Opsiyonel\n        city: getValues(\"city\"),\n        state: getValues(\"state\"),\n        postalCode: getValues(\"postalCode\"),\n        country: getValues(\"country\"),\n        phone: getValues(\"phone\"),\n      };\n    }\n\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard && !showNewCardForm) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      if (showNewCardForm) {\n        setErrorMessage(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        toast.error(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        return;\n      }\n      setShowVerificationInput(true);\n      return;\n    }\n\n    await finalizeOrder(finalShippingInfo);\n  };\n\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") { // Burası gerçek bir entegrasyonda bankadan gelen kodla doğrulanmalı\n      setShowVerificationInput(false);\n      setVerificationCode(\"\");\n\n      let finalShippingInfo;\n      if (selectedAddress) {\n        finalShippingInfo = {\n          title: selectedAddress.title,\n          fullName: selectedAddress.fullName,\n          addressLine1: selectedAddress.addressLine1,\n          addressLine2: selectedAddress.addressLine2 || \"\",\n          city: selectedAddress.city,\n          state: selectedAddress.state,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone,\n        };\n      } else {\n        const formData = getValues(); // En güncel form verilerini al\n        finalShippingInfo = {\n          title: formData.title,\n          fullName: formData.fullName,\n          addressLine1: formData.addressLine1,\n          addressLine2: formData.addressLine2 || \"\",\n          city: formData.city,\n          state: formData.state,\n          postalCode: formData.postalCode,\n          country: formData.country,\n          phone: formData.phone,\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\");\n    }\n  };\n\n  // Sipariş Onayla butonunun disable durumu\n  const isPlaceOrderButtonDisabled =\n    loading ||\n    cartItems.length === 0 ||\n    (selectedAddress === null && ( // Manuel giriş yapılıyorsa\n      !getValues(\"addressLine1\") || // Yeni alanları kontrol et\n      !getValues(\"fullName\") ||\n      !getValues(\"title\") ||\n      !getValues(\"state\") ||\n      !getValues(\"city\") ||\n      !getValues(\"postalCode\") ||\n      !getValues(\"country\") ||\n      !getValues(\"phone\") ||\n      Object.keys(errors).length > 0 // Formda hata varsa\n    )) ||\n    (selectedPaymentMethod === \"creditCard\" && selectedSavedCard === null && !showNewCardForm);\n\n\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\">\n        {cartItems.length === 0 ? (\n          <p className=\"text-center text-red-400\">Sepetiniz boş. Lütfen önce ürün ekleyin.</p>\n        ) : (\n          <p className=\"flex items-center\"><Loader2 className=\"animate-spin mr-2\" />Yükleniyor...</p>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\">\n      <div className=\"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-purple-400\">Siparişi Tamamla</h1>\n\n        <div className=\"mb-6 bg-gray-700 p-4 rounded-lg\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-green-400\">\n            Toplam Tutar: ₺{total.toFixed(2)}\n          </h2>\n        </div>\n\n        {errorMessage && (\n          <p className=\"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {errorMessage}\n          </p>\n        )}\n        {codeError && (\n          <p className=\"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {codeError}\n          </p>\n        )}\n\n        <form onSubmit={handleSubmit(handleInitiateOrder)} className=\"space-y-6\">\n          {/* Adres Seçimi Bölümü */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <MapPin className=\"mr-2\" /> Teslimat Adresi Seçin\n            </h2>\n            {addresses.length === 0 ? (\n              <p className=\"text-gray-400 mb-4\">Kayıtlı adresiniz bulunmamaktadır. Lütfen aşağıdaki formu doldurun.</p>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {addresses.map((addr) => (\n                  <label\n                    key={addr._id}\n                    className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                      selectedAddress && selectedAddress._id === addr._id\n                        ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                        : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"shippingAddress\"\n                      value={addr._id}\n                      checked={selectedAddress && selectedAddress._id === addr._id}\n                      onChange={() => handleAddressSelect(addr)}\n                      className=\"hidden\"\n                    />\n                    <div className=\"flex items-start\">\n                      <div className=\"flex-grow\">\n                        <p className=\"font-semibold text-lg\">{addr.title}</p>\n                        <p className=\"text-gray-300 text-sm\">{addr.addressLine1} {addr.addressLine2}</p>\n                        <p className=\"text-gray-400 text-xs\">{addr.city}, {addr.state}, {addr.postalCode}, {addr.country}</p>\n                        <p className=\"text-gray-400 text-xs\">Tel: {addr.phone}</p>\n                      </div>\n                      {addr.isDefault && (\n                        <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                          Varsayılan\n                        </span>\n                      )}\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            <div className=\"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\">\n              <h3 className=\"text-lg font-semibold mb-3\">Veya Yeni Adres Bilgilerini Girin</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {/* Yeni alanlar eklendi */}\n                <div>\n                  <label htmlFor=\"titleInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres Başlığı (Ev/İş)\n                  </label>\n                  <input\n                    id=\"titleInput\"\n                    type=\"text\"\n                    {...register(\"title\", { required: !selectedAddress && \"Adres başlığı zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"title\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.title && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.title.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"fullNameInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Alıcı Ad Soyad\n                  </label>\n                  <input\n                    id=\"fullNameInput\"\n                    type=\"text\"\n                    {...register(\"fullName\", { required: !selectedAddress && \"Ad Soyad zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"fullName\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.fullName && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.fullName.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"addressLine1Input\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres Satırı 1 (Cadde, Sokak, No)\n                  </label>\n                  <input\n                    id=\"addressLine1Input\"\n                    type=\"text\"\n                    {...register(\"addressLine1\", { required: !selectedAddress && \"Adres satırı 1 zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"addressLine1\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.addressLine1 && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.addressLine1.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"addressLine2Input\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres Satırı 2 (Daire, Kat, Bina Adı - İsteğe Bağlı)\n                  </label>\n                  <input\n                    id=\"addressLine2Input\"\n                    type=\"text\"\n                    {...register(\"addressLine2\")} // İsteğe bağlı olduğu için required yok\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"addressLine2\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                </div>\n                <div>\n                  <label htmlFor=\"cityInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Şehir\n                  </label>\n                  <input\n                    id=\"cityInput\"\n                    type=\"text\"\n                    {...register(\"city\", { required: !selectedAddress && \"Şehir zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"city\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.city && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.city.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"stateInput\" className=\"block text-sm font-medium text-gray-300\">\n                    İlçe / Eyalet\n                  </label>\n                  <input\n                    id=\"stateInput\"\n                    type=\"text\"\n                    {...register(\"state\", { required: !selectedAddress && \"İlçe / Eyalet zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"state\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.state && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.state.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"postalCodeInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Posta Kodu\n                  </label>\n                  <input\n                    id=\"postalCodeInput\"\n                    type=\"text\"\n                    {...register(\"postalCode\", { required: !selectedAddress && \"Posta kodu zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"postalCode\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.postalCode && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.postalCode.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"countryInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Ülke\n                  </label>\n                  <input\n                    id=\"countryInput\"\n                    type=\"text\"\n                    {...register(\"country\", { required: !selectedAddress && \"Ülke zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"country\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.country && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.country.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"phoneInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Telefon Numarası\n                  </label>\n                  <input\n                    id=\"phoneInput\"\n                    type=\"text\"\n                    {...register(\"phone\", { required: !selectedAddress && \"Telefon numarası zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"phone\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.phone && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.phone.message}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Ödeme Yöntemi Seçimi Bölümü */}\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <CreditCard className=\"mr-2\" /> Ödeme Yöntemi Seçin\n            </h2>\n            <div className=\"space-y-3\">\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"cashOnDelivery\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"cashOnDelivery\"\n                  checked={selectedPaymentMethod === \"cashOnDelivery\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"cashOnDelivery\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kapıda Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Ürünleri teslim alırken nakit veya kart ile ödeme yapabilirsiniz.</p>\n              </label>\n\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"creditCard\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"creditCard\"\n                  checked={selectedPaymentMethod === \"creditCard\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"creditCard\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kredi Kartı ile Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Kaydedilmiş kartlarınızdan birini seçin veya yeni bir kart ekleyin.</p>\n              </label>\n\n              {selectedPaymentMethod === \"creditCard\" && (\n                <div className=\"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\">\n                  <h3 className=\"text-lg font-semibold mb-3\">Kayıtlı Kartlarım</h3>\n                  {paymentMethods.length === 0 ? (\n                    <p className=\"text-gray-400 text-sm mb-4\">Henüz kayıtlı kartınız bulunmamaktadır.</p>\n                  ) : (\n                    <div className=\"grid grid-cols-1 gap-3 mb-4\">\n                      {paymentMethods.map((card) => (\n                        <label\n                          key={card._id}\n                          className={`flex items-center p-3 border rounded-md cursor-pointer ${\n                            selectedSavedCard && selectedSavedCard._id === card._id\n                              ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\"\n                              : \"border-gray-500 hover:border-gray-400 bg-gray-600\"\n                          }`}\n                        >\n                          <input\n                            type=\"radio\"\n                            name=\"savedCard\"\n                            value={card._id}\n                            checked={selectedSavedCard && selectedSavedCard._id === card._id}\n                            onChange={() => handleSavedCardSelect(card)}\n                            className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                          />\n                          <div className=\"flex-grow\">\n                            <p className=\"font-medium\">{card.cardHolderName} ({card.cardType || \"Kart\"})</p>\n                            <p className=\"text-sm text-gray-300\">**** **** **** {card.cardNumberLast4}</p>\n                            <p className=\"text-xs text-gray-400\">Son Kullanma: {card.expiryMonth}/{card.expiryYear}</p>\n                          </div>\n                          {card.isDefault && (\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                              Varsayılan\n                            </span>\n                          )}\n                        </label>\n                      ))}\n                    </div>\n                  )}\n\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                        setShowNewCardForm(!showNewCardForm);\n                        setSelectedSavedCard(null);\n                    }}\n                    className=\"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\"\n                  >\n                    <PlusCircle size={18} className=\"mr-2\" />\n                    {showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"}\n                  </button>\n\n                  {showNewCardForm && (\n                    <div className=\"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\">\n                      <h4 className=\"text-md font-semibold mb-3\">Yeni Kart Bilgileri</h4>\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <div>\n                          <label htmlFor=\"cardHolderName\" className=\"block text-sm font-medium text-gray-300\">Kart Üzerindeki İsim</label>\n                          <input type=\"text\" id=\"cardHolderName\" name=\"cardHolderName\" value={newCardData.cardHolderName} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required />\n                        </div>\n                        <div>\n                          <label htmlFor=\"cardNumber\" className=\"block text-sm font-medium text-gray-300\">Kart Numarası</label>\n                          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\" value={newCardData.cardNumber} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required maxLength=\"16\" />\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <div>\n                            <label htmlFor=\"expiryMonth\" className=\"block text-sm font-medium text-gray-300\">Ay (AA)</label>\n                            <input type=\"text\" id=\"expiryMonth\" name=\"expiryMonth\" value={newCardData.expiryMonth} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"MM\" required maxLength=\"2\" />\n                          </div>\n                          <div>\n                            <label htmlFor=\"expiryYear\" className=\"block text-sm font-medium text-gray-300\">Yıl (YY)</label>\n                            <input type=\"text\" id=\"expiryYear\" name=\"expiryYear\" value={newCardData.expiryYear} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"YY\" required maxLength=\"2\" />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center mt-2\">\n                          <input type=\"checkbox\" id=\"isDefaultCard\" name=\"isDefault\" checked={newCardData.isDefault} onChange={handleNewCardInputChange} className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\" />\n                          <label htmlFor=\"isDefaultCard\" className=\"ml-2 block text-sm font-medium text-gray-300\">Varsayılan Kart Yap</label>\n                        </div>\n                        <button type=\"button\" onClick={handleSaveNewCard} disabled={loading} className={`w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}>\n                          {loading ? <Loader2 className=\"animate-spin mr-2\" /> : <PenTool className=\"mr-2\" />} Kartı Kaydet\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {showVerificationInput && selectedPaymentMethod === \"creditCard\" && (\n            <div className=\"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\">\n              <h3 className=\"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\">\n                <CreditCard className=\"mr-2\" /> Kredi Kartı Güvenlik Onayı\n              </h3>\n              <p className=\"text-gray-300 mb-4\">\n                Güvenliğiniz için, kredi kartı sahibinin kayıtlı telefon numarasına gönderilen 4 haneli kodu giriniz.\n              </p>\n              <input\n                type=\"text\"\n                maxLength=\"4\"\n                value={verificationCode}\n                onChange={(e) => setVerificationCode(e.target.value)}\n                placeholder=\"Onay Kodu\"\n                className=\"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\"\n                inputMode=\"numeric\"\n                pattern=\"[0-9]*\"\n              />\n              {codeError && (\n                <p className=\"mt-2 text-sm text-orange-400 flex items-center justify-center\">\n                  <XCircle className=\"mr-1\" size={16} /> {codeError}\n                </p>\n              )}\n              <button\n                type=\"button\"\n                onClick={handleVerifyCode}\n                className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\"\n                disabled={loading || verificationCode.length !== 4}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"animate-spin mr-2\" /> Doğrulanıyor...\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle className=\"mr-2\" /> Kodu Doğrula ve Siparişi Onayla\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n\n          {!showVerificationInput && (\n            <button\n              type=\"submit\"\n              disabled={isPlaceOrderButtonDisabled}\n              className={`w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${\n                isPlaceOrderButtonDisabled\n                  ? \"bg-gray-600 cursor-not-allowed\"\n                  : \"bg-green-600 hover:bg-green-700\"\n              }`}\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"animate-spin mr-2\" /> Sipariş Veriliyor...\n                </>\n              ) : (\n                \"Siparişi Onayla\"\n              )}\n            </button>\n          )}\n        </form>\n\n        <button\n          onClick={() => navigate(\"/cart\")}\n          className=\"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\"\n        >\n          <Loader2 className=\"mr-2\" size={18} /> Sepete Geri Dön\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}