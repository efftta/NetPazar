{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\Beykent Projeler\\\\netpazar\\\\NetPazar Teslim\\\\frontend\\\\src\\\\pages\\\\Products.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\"; // useLocation'a artık ihtiyaç kalmadı\nimport ProductCard from \"../components/ProductCard\";\nimport { fetchProductsByParams } from \"../api/productApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [category, setCategory] = useState(\"\"); // Bu state'i kategori filtrelemesi için tutmaya devam ediyoruz\n  const [filter, setFilter] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchParams] = useSearchParams();\n\n  // URL'deki parametreleri dinle ve state'leri güncelle\n  useEffect(() => {\n    const urlFilter = searchParams.get(\"filter\") || \"\";\n    setFilter(urlFilter);\n\n    // Kategori parametresini de URL'den alıyoruz, eğer varsa\n    const urlCategory = searchParams.get(\"category\") || \"\";\n    setCategory(urlCategory);\n  }, [searchParams]); // searchParams değiştiğinde çalışır\n\n  // Ürünleri fetch etme işlemi\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const params = {};\n        // Kategori filtresi\n        if (category) params.category = category;\n\n        // Diğer filtreler\n        if (filter === \"bestseller\") params.isBestSeller = \"true\";\n        if (filter === \"campaign\") params.isCampaign = \"true\";\n        if (filter === \"new\") params.isNewProduct = \"true\";\n\n        // Arama terimi\n        const currentSearchQuery = searchParams.get(\"search\");\n        if (currentSearchQuery) {\n          params.search = currentSearchQuery;\n        }\n        const fetchedProducts = await fetchProductsByParams(params);\n        setProducts(fetchedProducts);\n      } catch (err) {\n        console.error(\"Ürünler yüklenirken hata:\", err);\n        setError(\"Ürünler yüklenirken bir hata oluştu.\");\n        setProducts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProducts();\n  }, [category, filter, searchParams]); // category bağımlılığı da eklendi\n\n  // Filtre butonlarının dinamik sınıflandırması\n  const getFilterButtonClass = buttonFilter => `px-4 py-2 rounded-md text-sm font-medium transition-colors ${filter === buttonFilter ? \"bg-blue-600 text-white\" // Aktif filtre\n  : \"bg-gray-700 hover:bg-gray-600 text-white\" // Pasif filtre\n  }`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4 text-white min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 my-4 flex-wrap\",\n      children: [{\n        label: \"Tümü\",\n        value: \"\"\n      }, {\n        label: \"Kampanyalar\",\n        value: \"campaign\"\n      }, {\n        label: \"Çok Satanlar\",\n        value: \"bestseller\"\n      }, {\n        label: \"Yeni Ürünler\",\n        value: \"new\"\n      }].map(btn => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setFilter(btn.value),\n        className: getFilterButtonClass(btn.value),\n        children: btn.label\n      }, btn.value, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-lg mt-10\",\n      children: \"\\xDCr\\xFCnler y\\xFCkleniyor...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-red-500 text-lg mt-10\",\n      children: [\"Hata: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this), !loading && !error && products.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-lg mt-10\",\n      children: \"Arad\\u0131\\u011F\\u0131n\\u0131z kriterlere uygun \\xFCr\\xFCn bulunamad\\u0131.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\",\n      children: !loading && !error && products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product\n      }, product._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Products, \"76FebOHzp72sg7F2ShHvXdLMwpg=\", false, function () {\n  return [useSearchParams];\n});\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useEffect","useState","useSearchParams","ProductCard","fetchProductsByParams","jsxDEV","_jsxDEV","Products","_s","products","setProducts","category","setCategory","filter","setFilter","loading","setLoading","error","setError","searchParams","urlFilter","get","urlCategory","fetchProducts","params","isBestSeller","isCampaign","isNewProduct","currentSearchQuery","search","fetchedProducts","err","console","getFilterButtonClass","buttonFilter","className","children","label","value","map","btn","onClick","fileName","_jsxFileName","lineNumber","columnNumber","length","product","_id","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/Beykent Projeler/netpazar/NetPazar Teslim/frontend/src/pages/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\"; // useLocation'a artık ihtiyaç kalmadı\nimport ProductCard from \"../components/ProductCard\";\nimport { fetchProductsByParams } from \"../api/productApi\";\n\nconst Products = () => {\n  const [products, setProducts] = useState([]);\n  const [category, setCategory] = useState(\"\"); // Bu state'i kategori filtrelemesi için tutmaya devam ediyoruz\n  const [filter, setFilter] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [searchParams] = useSearchParams();\n\n  // URL'deki parametreleri dinle ve state'leri güncelle\n  useEffect(() => {\n    const urlFilter = searchParams.get(\"filter\") || \"\";\n    setFilter(urlFilter);\n\n    // Kategori parametresini de URL'den alıyoruz, eğer varsa\n    const urlCategory = searchParams.get(\"category\") || \"\";\n    setCategory(urlCategory);\n\n  }, [searchParams]); // searchParams değiştiğinde çalışır\n\n  // Ürünleri fetch etme işlemi\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const params = {};\n        // Kategori filtresi\n        if (category) params.category = category;\n\n        // Diğer filtreler\n        if (filter === \"bestseller\") params.isBestSeller = \"true\";\n        if (filter === \"campaign\") params.isCampaign = \"true\";\n        if (filter === \"new\") params.isNewProduct = \"true\";\n\n        // Arama terimi\n        const currentSearchQuery = searchParams.get(\"search\");\n        if (currentSearchQuery) {\n          params.search = currentSearchQuery;\n        }\n\n        const fetchedProducts = await fetchProductsByParams(params);\n        setProducts(fetchedProducts);\n      } catch (err) {\n        console.error(\"Ürünler yüklenirken hata:\", err);\n        setError(\"Ürünler yüklenirken bir hata oluştu.\");\n        setProducts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, [category, filter, searchParams]); // category bağımlılığı da eklendi\n\n  // Filtre butonlarının dinamik sınıflandırması\n  const getFilterButtonClass = (buttonFilter) =>\n    `px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n      filter === buttonFilter\n        ? \"bg-blue-600 text-white\" // Aktif filtre\n        : \"bg-gray-700 hover:bg-gray-600 text-white\" // Pasif filtre\n    }`;\n\n  return (\n    <div className=\"container mx-auto p-4 text-white min-h-screen\">\n      {/* Kategori Listesi Bileşeni Kaldırıldı */}\n      {/* <CategoryList onCategorySelect={setCategory} selectedCategory={category} /> */}\n\n      {/* Ana filtre butonları (Kampanyalar, Çok Satanlar, Yeni Ürünler) */}\n      <div className=\"flex gap-4 my-4 flex-wrap\">\n        {[\n          { label: \"Tümü\", value: \"\" },\n          { label: \"Kampanyalar\", value: \"campaign\" },\n          { label: \"Çok Satanlar\", value: \"bestseller\" },\n          { label: \"Yeni Ürünler\", value: \"new\" },\n        ].map((btn) => (\n          <button\n            key={btn.value}\n            onClick={() => setFilter(btn.value)}\n            className={getFilterButtonClass(btn.value)}\n          >\n            {btn.label}\n          </button>\n        ))}\n      </div>\n\n      {loading && <p className=\"text-center text-lg mt-10\">Ürünler yükleniyor...</p>}\n      {error && <p className=\"text-center text-red-500 text-lg mt-10\">Hata: {error}</p>}\n      {!loading && !error && products.length === 0 && (\n        <p className=\"text-center text-lg mt-10\">Aradığınız kriterlere uygun ürün bulunamadı.</p>\n      )}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\">\n        {!loading &&\n          !error &&\n          products.map((product) => <ProductCard key={product._id} product={product} />)}\n      </div>\n    </div>\n  );\n};\n\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}