{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\asdas2\\\\frontend\\\\src\\\\pages\\\\Payment.jsx\",\n  _s = $RefreshSig$();\n// frontend/pages/Payment.jsx (SON GÜNCEL HALİ - Adres ve Ödeme Yöntemi Seçimi)\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport { fetchUserAddresses, fetchUserPaymentMethods,\n// YENİ: Ödeme yöntemlerini çekme\naddPaymentMethod // YENİ: Ödeme yöntemi ekleme\n} from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, Trash2 } from \"lucide-react\"; // Yeni ikonlar\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Payment = () => {\n  _s();\n  const {\n    cartItems,\n    total,\n    clearCart\n  } = useCart();\n  const {\n    token,\n    isAuthenticated,\n    loading: authLoading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]); // YENİ: Ödeme yöntemleri state'i\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\"); // Varsayılan Kapıda Ödeme\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null); // Seçilen kayıtlı kart\n\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true); // Adres ve kartları çekme durumu\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false); // Yeni kart formu gösterme/gizleme\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    cardType: \"\",\n    isDefault: false\n  });\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues,\n    // Form değerlerini okumak için\n    formState: {\n      errors\n    }\n  } = useForm();\n\n  // Sepet boşsa veya oturum açılmamışsa yönlendirme\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", {\n          replace: true\n        });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        // navigate(\"/\", { replace: true });\n        return;\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find(addr => addr.isDefault);\n          if (defaultAddr) {\n            setSelectedAddress(defaultAddr);\n            setValue(\"address\", defaultAddr.address);\n            setValue(\"city\", defaultAddr.city);\n            setValue(\"postalCode\", defaultAddr.postalCode);\n            setValue(\"country\", defaultAddr.country);\n            setValue(\"phone\", defaultAddr.phone);\n          } else if (fetchedAddresses.length > 0) {\n            // Varsayılan yoksa ilkini seç\n            setSelectedAddress(fetchedAddresses[0]);\n            setValue(\"address\", fetchedAddresses[0].address);\n            setValue(\"city\", fetchedAddresses[0].city);\n            setValue(\"postalCode\", fetchedAddresses[0].postalCode);\n            setValue(\"country\", fetchedAddresses[0].country);\n            setValue(\"phone\", fetchedAddresses[0].phone);\n          }\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find(pm => pm.isDefault);\n          if (defaultCard) {\n            setSelectedSavedCard(defaultCard);\n            setSelectedPaymentMethod(\"creditCard\"); // Varsayılan kart varsa kartı seçili yap\n          } else if (fetchedPaymentMethods.length > 0) {\n            // Varsayılan kart yoksa ve kartlar varsa ilkini seç\n            setSelectedSavedCard(fetchedPaymentMethods[0]);\n            setSelectedPaymentMethod(\"creditCard\");\n          }\n        } catch (err) {\n          console.error(\"Veri çekerken hata:\", err);\n          setErrorMessage(err.message || \"Bilgiler yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue]);\n\n  // Adres seçimi değiştiğinde form alanlarını güncelle\n  const handleAddressSelect = address => {\n    setSelectedAddress(address);\n    // Seçilen adresin bilgilerini form alanlarına yansıt\n    setValue(\"address\", address.address);\n    setValue(\"city\", address.city);\n    setValue(\"postalCode\", address.postalCode);\n    setValue(\"country\", address.country);\n    setValue(\"phone\", address.phone);\n    // Manuel giriş alanlarını temizle (eğer daha önce girilmişse)\n    setValue(\"addressInput\", \"\");\n    setValue(\"cityInput\", \"\");\n    setValue(\"postalCodeInput\", \"\");\n    setValue(\"countryInput\", \"\");\n    setValue(\"phoneInput\", \"\");\n  };\n\n  // Kart seçimi değiştiğinde\n  const handlePaymentMethodSelect = method => {\n    setSelectedPaymentMethod(method);\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null); // Kapıda ödeme seçildiyse kayıtlı kartı sıfırla\n    }\n  };\n  const handleSavedCardSelect = card => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\"); // Kayıtlı kart seçilince otomatik kart ödemeyi seç\n  };\n\n  // Yeni kart formu input değişimi\n  const handleNewCardInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n\n  // Yeni kartı kaydetme işlemi\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (!newCardData.cardHolderName || !newCardData.cardNumber || !newCardData.expiryMonth || !newCardData.expiryYear) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      // Kart numarasının son 4 hanesini al\n      const cardNumberLast4 = newCardData.cardNumber.slice(-4);\n      // Kart tipini belirle (basit bir regex ile)\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        // Backend sadece son 4 haneyi tutacak\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault\n      };\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false); // Formu kapat\n      setNewCardData({\n        // Formu sıfırla\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        cardType: \"\",\n        isDefault: false\n      });\n\n      // Yeni eklenen kartı otomatik seç\n      const newlyAddedCard = updatedPaymentMethods.find(pm => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === cardNumberLast4);\n      if (newlyAddedCard) {\n        setSelectedSavedCard(newlyAddedCard);\n        setSelectedPaymentMethod(\"creditCard\");\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const onSubmit = async data => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      setLoading(false);\n      return;\n    }\n\n    // Adres bilgilerini kontrol et\n    let finalShippingInfo;\n    if (selectedAddress) {\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone\n      };\n    } else {\n      // Eğer hiç kayıtlı adres seçilmemişse veya manuel adres girilmişse, formdaki değerleri kullan\n      finalShippingInfo = {\n        address: data.address,\n        city: data.city,\n        postalCode: data.postalCode,\n        country: data.country,\n        phone: data.phone\n      };\n      // Manuel giriş alanlarının da dolu olduğundan emin ol\n      if (!finalShippingInfo.address || !finalShippingInfo.city || !finalShippingInfo.postalCode || !finalShippingInfo.country || !finalShippingInfo.phone) {\n        setErrorMessage(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n        setLoading(false);\n        return;\n      }\n    }\n\n    // Ödeme yöntemi kontrolü\n    let paymentMethodInfo = {\n      type: selectedPaymentMethod\n    };\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin.\");\n        setLoading(false);\n        return;\n      }\n      paymentMethodInfo.cardId = selectedSavedCard._id; // Seçilen kartın ID'sini gönder\n      paymentMethodInfo.last4 = selectedSavedCard.cardNumberLast4;\n      paymentMethodInfo.cardHolderName = selectedSavedCard.cardHolderName;\n    }\n    try {\n      const orderData = {\n        products: cartItems.map(item => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price\n        })),\n        shippingInfo: finalShippingInfo,\n        paymentMethod: paymentMethodInfo,\n        // Ödeme yöntemini ve detaylarını gönder\n        totalPrice: total // Toplam fiyatı orderData'ya ekle\n      };\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice\n        }\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sepet boşsa veya veri çekiliyorsa bekleme ekranı\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\",\n      children: cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-red-400\",\n        children: \"Sepetiniz bo\\u015F. L\\xFCtfen \\xF6nce \\xFCr\\xFCn ekleyin.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 44\n        }, this), \"Y\\xFCkleniyor...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-6 text-center\",\n        children: \"Sipari\\u015Fi Tamamla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4 text-green-400\",\n          children: [\"Toplam Tutar: \\u20BA\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-red-400 mb-4\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), \" Teslimat Adresi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), addresses.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400 mb-4\",\n            children: \"Kay\\u0131tl\\u0131 adresiniz bulunmamaktad\\u0131r. L\\xFCtfen a\\u015Fa\\u011F\\u0131daki formu doldurun.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n            children: addresses.map(addr => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedAddress && selectedAddress._id === addr._id ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"shippingAddress\",\n                value: addr._id,\n                checked: selectedAddress && selectedAddress._id === addr._id,\n                onChange: () => handleAddressSelect(addr),\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-grow\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-semibold text-lg\",\n                    children: addr.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-300 text-sm\",\n                    children: addr.address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [addr.city, \", \", addr.postalCode, \", \", addr.country]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [\"Tel: \", addr.phone]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this), addr.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                  children: \"Varsay\\u0131lan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this)]\n            }, addr._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-3\",\n              children: \"Veya Yeni Adres Bilgilerini Girin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"addressInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"addressInput\",\n                  type: \"text\",\n                  ...register(\"address\", {\n                    required: !selectedAddress && \"Adres zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                  // Eğer kayıtlı adres seçiliyse, manuel alanları boş bırak\n                  ,\n                  defaultValue: selectedAddress ? selectedAddress.address : \"\",\n                  onChange: e => setSelectedAddress({\n                    ...selectedAddress,\n                    address: e.target.value,\n                    _id: null\n                  }) // Manuel girişte ID'yi null yap\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this), errors.address && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.address.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"cityInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\u015Eehir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"cityInput\",\n                  type: \"text\",\n                  ...register(\"city\", {\n                    required: !selectedAddress && \"Şehir zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  defaultValue: selectedAddress ? selectedAddress.city : \"\",\n                  onChange: e => setSelectedAddress({\n                    ...selectedAddress,\n                    city: e.target.value,\n                    _id: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 19\n                }, this), errors.city && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.city.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"postalCodeInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Posta Kodu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"postalCodeInput\",\n                  type: \"text\",\n                  ...register(\"postalCode\", {\n                    required: !selectedAddress && \"Posta kodu zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  defaultValue: selectedAddress ? selectedAddress.postalCode : \"\",\n                  onChange: e => setSelectedAddress({\n                    ...selectedAddress,\n                    postalCode: e.target.value,\n                    _id: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 19\n                }, this), errors.postalCode && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.postalCode.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"countryInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\xDClke\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"countryInput\",\n                  type: \"text\",\n                  ...register(\"country\", {\n                    required: !selectedAddress && \"Ülke zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  defaultValue: selectedAddress ? selectedAddress.country : \"\",\n                  onChange: e => setSelectedAddress({\n                    ...selectedAddress,\n                    country: e.target.value,\n                    _id: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 19\n                }, this), errors.country && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.country.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"phoneInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Telefon Numaras\\u0131\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"phoneInput\",\n                  type: \"text\",\n                  ...register(\"phone\", {\n                    required: !selectedAddress && \"Telefon numarası zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  defaultValue: selectedAddress ? selectedAddress.phone : \"\",\n                  onChange: e => setSelectedAddress({\n                    ...selectedAddress,\n                    phone: e.target.value,\n                    _id: null\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 19\n                }, this), errors.phone && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.phone.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), \" \\xD6deme Y\\xF6ntemi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"cashOnDelivery\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"cashOnDelivery\",\n                checked: selectedPaymentMethod === \"cashOnDelivery\",\n                onChange: () => handlePaymentMethodSelect(\"cashOnDelivery\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kap\\u0131da \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"\\xDCr\\xFCnleri teslim al\\u0131rken nakit veya kart ile \\xF6deme yapabilirsiniz.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"creditCard\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"creditCard\",\n                checked: selectedPaymentMethod === \"creditCard\",\n                onChange: () => handlePaymentMethodSelect(\"creditCard\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kay\\u0131tl\\u0131 Kredi Kart\\u0131 ile \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"Kaydedilmi\\u015F kartlar\\u0131n\\u0131zdan birini se\\xE7in.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold mb-3\",\n                children: \"Kay\\u0131tl\\u0131 Kartlar\\u0131m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this), paymentMethods.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-400 text-sm mb-4\",\n                children: \"Hen\\xFCz kay\\u0131tl\\u0131 kart\\u0131n\\u0131z bulunmamaktad\\u0131r.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 gap-3 mb-4\",\n                children: paymentMethods.map(card => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `flex items-center p-3 border rounded-md cursor-pointer ${selectedSavedCard && selectedSavedCard._id === card._id ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\" : \"border-gray-500 hover:border-gray-400 bg-gray-600\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"savedCard\",\n                    value: card._id,\n                    checked: selectedSavedCard && selectedSavedCard._id === card._id,\n                    onChange: () => handleSavedCardSelect(card),\n                    className: \"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-grow\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: [card.cardHolderName, \" (\", card.cardType || \"Kart\", \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 519,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-300\",\n                      children: [\"**** **** **** \", card.cardNumberLast4]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 520,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-400\",\n                      children: [\"Son Kullanma: \", card.expiryMonth, \"/\", card.expiryYear]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 521,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 27\n                  }, this), card.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                    children: \"Varsay\\u0131lan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 524,\n                    columnNumber: 29\n                  }, this)]\n                }, card._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowNewCardForm(!showNewCardForm),\n                className: \"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 21\n                }, this), showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 19\n              }, this), showNewCardForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-semibold mb-3\",\n                  children: \"Yeni Kart Bilgileri\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardHolderName\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart \\xDCzerindeki \\u0130sim\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 547,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardHolderName\",\n                      name: \"cardHolderName\",\n                      value: newCardData.cardHolderName,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 548,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 546,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardNumber\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart Numaras\\u0131\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 551,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardNumber\",\n                      name: \"cardNumber\",\n                      value: newCardData.cardNumber,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true,\n                      maxLength: \"16\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 552,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryMonth\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Ay (AA)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 556,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryMonth\",\n                        name: \"expiryMonth\",\n                        value: newCardData.expiryMonth,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"MM\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 557,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryYear\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Y\\u0131l (YY)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 560,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryYear\",\n                        name: \"expiryYear\",\n                        value: newCardData.expiryYear,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"YY\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 561,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 559,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 554,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center mt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"isDefaultCard\",\n                      name: \"isDefault\",\n                      checked: newCardData.isDefault,\n                      onChange: handleNewCardInputChange,\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"isDefaultCard\",\n                      className: \"ml-2 block text-sm font-medium text-gray-300\",\n                      children: \"Varsay\\u0131lan Kart Yap\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 566,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: handleSaveNewCard,\n                    disabled: loading,\n                    className: `w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`,\n                    children: [loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 569,\n                      columnNumber: 38\n                    }, this) : /*#__PURE__*/_jsxDEV(PenTool, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 569,\n                      columnNumber: 82\n                    }, this), \" Kart\\u0131 Kaydet\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading || !selectedAddress || !selectedSavedCard && selectedPaymentMethod === \"creditCard\" || cartItems.length === 0,\n          className: `w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${loading || !selectedAddress || !selectedSavedCard && selectedPaymentMethod === \"creditCard\" || cartItems.length === 0 ? \"bg-gray-600 cursor-not-allowed\" : \"bg-green-600 hover:bg-green-700\"}`,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this), \" Sipari\\u015F Veriliyor...\"]\n          }, void 0, true) : \"Siparişi Onayla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"e6Eelo4b3m2/LCTJ7ztUOAzEloI=\", false, function () {\n  return [useCart, useAuth, useNavigate, useForm];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCart","useAuth","createOrder","fetchUserAddresses","fetchUserPaymentMethods","addPaymentMethod","useForm","MapPin","CreditCard","Loader2","PlusCircle","PenTool","Trash2","jsxDEV","_jsxDEV","Fragment","_Fragment","Payment","_s","cartItems","total","clearCart","token","isAuthenticated","loading","authLoading","navigate","addresses","setAddresses","paymentMethods","setPaymentMethods","selectedAddress","setSelectedAddress","selectedPaymentMethod","setSelectedPaymentMethod","selectedSavedCard","setSelectedSavedCard","setLoading","errorMessage","setErrorMessage","fetchingData","setFetchingData","showNewCardForm","setShowNewCardForm","newCardData","setNewCardData","cardHolderName","cardNumber","expiryMonth","expiryYear","cardType","isDefault","register","handleSubmit","setValue","getValues","formState","errors","replace","length","fetchData","fetchedAddresses","defaultAddr","find","addr","address","city","postalCode","country","phone","fetchedPaymentMethods","defaultCard","pm","err","console","error","message","handleAddressSelect","handlePaymentMethodSelect","method","handleSavedCardSelect","card","handleNewCardInputChange","e","name","value","type","checked","target","handleSaveNewCard","cardNumberLast4","slice","test","cardToSave","updatedPaymentMethods","newlyAddedCard","onSubmit","data","finalShippingInfo","paymentMethodInfo","cardId","_id","last4","orderData","products","map","item","product","quantity","price","discountPrice","shippingInfo","paymentMethod","totalPrice","createdOrder","state","orderId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","onChange","title","htmlFor","id","required","defaultValue","onClick","size","maxLength","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/asdas2/frontend/src/pages/Payment.jsx"],"sourcesContent":["// frontend/pages/Payment.jsx (SON GÜNCEL HALİ - Adres ve Ödeme Yöntemi Seçimi)\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport { \n  fetchUserAddresses, \n  fetchUserPaymentMethods, // YENİ: Ödeme yöntemlerini çekme\n  addPaymentMethod, // YENİ: Ödeme yöntemi ekleme\n} from \"../api/userApi\"; \nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, Trash2 } from \"lucide-react\"; // Yeni ikonlar\n\nconst Payment = () => {\n  const { cartItems, total, clearCart } = useCart();\n  const { token, isAuthenticated, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]); // YENİ: Ödeme yöntemleri state'i\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\"); // Varsayılan Kapıda Ödeme\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null); // Seçilen kayıtlı kart\n\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true); // Adres ve kartları çekme durumu\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false); // Yeni kart formu gösterme/gizleme\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    cardType: \"\",\n    isDefault: false,\n  });\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues, // Form değerlerini okumak için\n    formState: { errors },\n  } = useForm();\n\n  // Sepet boşsa veya oturum açılmamışsa yönlendirme\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", { replace: true });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        // navigate(\"/\", { replace: true });\n        return;\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find(addr => addr.isDefault);\n          if (defaultAddr) {\n            setSelectedAddress(defaultAddr);\n            setValue(\"address\", defaultAddr.address);\n            setValue(\"city\", defaultAddr.city);\n            setValue(\"postalCode\", defaultAddr.postalCode);\n            setValue(\"country\", defaultAddr.country);\n            setValue(\"phone\", defaultAddr.phone);\n          } else if (fetchedAddresses.length > 0) {\n            // Varsayılan yoksa ilkini seç\n            setSelectedAddress(fetchedAddresses[0]);\n            setValue(\"address\", fetchedAddresses[0].address);\n            setValue(\"city\", fetchedAddresses[0].city);\n            setValue(\"postalCode\", fetchedAddresses[0].postalCode);\n            setValue(\"country\", fetchedAddresses[0].country);\n            setValue(\"phone\", fetchedAddresses[0].phone);\n          }\n\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find(pm => pm.isDefault);\n          if (defaultCard) {\n            setSelectedSavedCard(defaultCard);\n            setSelectedPaymentMethod(\"creditCard\"); // Varsayılan kart varsa kartı seçili yap\n          } else if (fetchedPaymentMethods.length > 0) {\n            // Varsayılan kart yoksa ve kartlar varsa ilkini seç\n            setSelectedSavedCard(fetchedPaymentMethods[0]);\n            setSelectedPaymentMethod(\"creditCard\");\n          }\n\n        } catch (err) {\n          console.error(\"Veri çekerken hata:\", err);\n          setErrorMessage(err.message || \"Bilgiler yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue]);\n\n\n  // Adres seçimi değiştiğinde form alanlarını güncelle\n  const handleAddressSelect = (address) => {\n    setSelectedAddress(address);\n    // Seçilen adresin bilgilerini form alanlarına yansıt\n    setValue(\"address\", address.address);\n    setValue(\"city\", address.city);\n    setValue(\"postalCode\", address.postalCode);\n    setValue(\"country\", address.country);\n    setValue(\"phone\", address.phone);\n    // Manuel giriş alanlarını temizle (eğer daha önce girilmişse)\n    setValue(\"addressInput\", \"\");\n    setValue(\"cityInput\", \"\");\n    setValue(\"postalCodeInput\", \"\");\n    setValue(\"countryInput\", \"\");\n    setValue(\"phoneInput\", \"\");\n  };\n\n  // Kart seçimi değiştiğinde\n  const handlePaymentMethodSelect = (method) => {\n    setSelectedPaymentMethod(method);\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null); // Kapıda ödeme seçildiyse kayıtlı kartı sıfırla\n    }\n  };\n\n  const handleSavedCardSelect = (card) => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\"); // Kayıtlı kart seçilince otomatik kart ödemeyi seç\n  };\n\n  // Yeni kart formu input değişimi\n  const handleNewCardInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value,\n    });\n  };\n\n  // Yeni kartı kaydetme işlemi\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (!newCardData.cardHolderName || !newCardData.cardNumber || !newCardData.expiryMonth || !newCardData.expiryYear) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      // Kart numarasının son 4 hanesini al\n      const cardNumberLast4 = newCardData.cardNumber.slice(-4);\n      // Kart tipini belirle (basit bir regex ile)\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";\n      else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";\n      else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber, // Backend sadece son 4 haneyi tutacak\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault,\n      };\n\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false); // Formu kapat\n      setNewCardData({ // Formu sıfırla\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        cardType: \"\",\n        isDefault: false,\n      });\n\n      // Yeni eklenen kartı otomatik seç\n      const newlyAddedCard = updatedPaymentMethods.find(pm => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === cardNumberLast4);\n      if(newlyAddedCard) {\n        setSelectedSavedCard(newlyAddedCard);\n        setSelectedPaymentMethod(\"creditCard\");\n      }\n\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  const onSubmit = async (data) => {\n    setLoading(true);\n    setErrorMessage(\"\");\n\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      setLoading(false);\n      return;\n    }\n\n    // Adres bilgilerini kontrol et\n    let finalShippingInfo;\n    if (selectedAddress) {\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone,\n      };\n    } else {\n      // Eğer hiç kayıtlı adres seçilmemişse veya manuel adres girilmişse, formdaki değerleri kullan\n      finalShippingInfo = {\n        address: data.address,\n        city: data.city,\n        postalCode: data.postalCode,\n        country: data.country,\n        phone: data.phone,\n      };\n      // Manuel giriş alanlarının da dolu olduğundan emin ol\n      if (!finalShippingInfo.address || !finalShippingInfo.city || !finalShippingInfo.postalCode || !finalShippingInfo.country || !finalShippingInfo.phone) {\n          setErrorMessage(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n          setLoading(false);\n          return;\n      }\n    }\n    \n    // Ödeme yöntemi kontrolü\n    let paymentMethodInfo = { type: selectedPaymentMethod };\n    if (selectedPaymentMethod === \"creditCard\") {\n        if (!selectedSavedCard) {\n            setErrorMessage(\"Lütfen bir kayıtlı kart seçin.\");\n            setLoading(false);\n            return;\n        }\n        paymentMethodInfo.cardId = selectedSavedCard._id; // Seçilen kartın ID'sini gönder\n        paymentMethodInfo.last4 = selectedSavedCard.cardNumberLast4;\n        paymentMethodInfo.cardHolderName = selectedSavedCard.cardHolderName;\n    }\n\n    try {\n      const orderData = {\n        products: cartItems.map((item) => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price,\n        })),\n        shippingInfo: finalShippingInfo,\n        paymentMethod: paymentMethodInfo, // Ödeme yöntemini ve detaylarını gönder\n        totalPrice: total, // Toplam fiyatı orderData'ya ekle\n      };\n\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice,\n        },\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sepet boşsa veya veri çekiliyorsa bekleme ekranı\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\">\n        {cartItems.length === 0 ? (\n          <p className=\"text-center text-red-400\">Sepetiniz boş. Lütfen önce ürün ekleyin.</p>\n        ) : (\n          <p className=\"flex items-center\"><Loader2 className=\"animate-spin mr-2\" />Yükleniyor...</p>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\">\n      <div className=\"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center\">Siparişi Tamamla</h1>\n\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-green-400\">\n            Toplam Tutar: ₺{total.toFixed(2)}\n          </h2>\n        </div>\n\n        {errorMessage && (\n          <p className=\"mt-4 text-center text-red-400 mb-4\">{errorMessage}</p>\n        )}\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n          {/* Adres Seçimi Bölümü */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <MapPin className=\"mr-2\" /> Teslimat Adresi Seçin\n            </h2>\n            {addresses.length === 0 ? (\n              <p className=\"text-gray-400 mb-4\">Kayıtlı adresiniz bulunmamaktadır. Lütfen aşağıdaki formu doldurun.</p>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {addresses.map((addr) => (\n                  <label\n                    key={addr._id}\n                    className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                      selectedAddress && selectedAddress._id === addr._id\n                        ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                        : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"shippingAddress\"\n                      value={addr._id}\n                      checked={selectedAddress && selectedAddress._id === addr._id}\n                      onChange={() => handleAddressSelect(addr)}\n                      className=\"hidden\"\n                    />\n                    <div className=\"flex items-start\">\n                      <div className=\"flex-grow\">\n                        <p className=\"font-semibold text-lg\">{addr.title}</p>\n                        <p className=\"text-gray-300 text-sm\">{addr.address}</p>\n                        <p className=\"text-gray-400 text-xs\">{addr.city}, {addr.postalCode}, {addr.country}</p>\n                        <p className=\"text-gray-400 text-xs\">Tel: {addr.phone}</p>\n                      </div>\n                      {addr.isDefault && (\n                        <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                          Varsayılan\n                        </span>\n                      )}\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            {/* Yeni adres ekleme formu (manuel giriş için) */}\n            <div className=\"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\">\n              <h3 className=\"text-lg font-semibold mb-3\">Veya Yeni Adres Bilgilerini Girin</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label htmlFor=\"addressInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres\n                  </label>\n                  <input\n                    id=\"addressInput\"\n                    type=\"text\"\n                    {...register(\"address\", { required: !selectedAddress && \"Adres zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    // Eğer kayıtlı adres seçiliyse, manuel alanları boş bırak\n                    defaultValue={selectedAddress ? selectedAddress.address : \"\"}\n                    onChange={(e) => setSelectedAddress({ ...selectedAddress, address: e.target.value, _id: null })} // Manuel girişte ID'yi null yap\n                  />\n                  {errors.address && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.address.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"cityInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Şehir\n                  </label>\n                  <input\n                    id=\"cityInput\"\n                    type=\"text\"\n                    {...register(\"city\", { required: !selectedAddress && \"Şehir zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    defaultValue={selectedAddress ? selectedAddress.city : \"\"}\n                    onChange={(e) => setSelectedAddress({ ...selectedAddress, city: e.target.value, _id: null })}\n                  />\n                  {errors.city && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.city.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"postalCodeInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Posta Kodu\n                  </label>\n                  <input\n                    id=\"postalCodeInput\"\n                    type=\"text\"\n                    {...register(\"postalCode\", { required: !selectedAddress && \"Posta kodu zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    defaultValue={selectedAddress ? selectedAddress.postalCode : \"\"}\n                    onChange={(e) => setSelectedAddress({ ...selectedAddress, postalCode: e.target.value, _id: null })}\n                  />\n                  {errors.postalCode && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.postalCode.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"countryInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Ülke\n                  </label>\n                  <input\n                    id=\"countryInput\"\n                    type=\"text\"\n                    {...register(\"country\", { required: !selectedAddress && \"Ülke zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    defaultValue={selectedAddress ? selectedAddress.country : \"\"}\n                    onChange={(e) => setSelectedAddress({ ...selectedAddress, country: e.target.value, _id: null })}\n                  />\n                  {errors.country && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.country.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"phoneInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Telefon Numarası\n                  </label>\n                  <input\n                    id=\"phoneInput\"\n                    type=\"text\"\n                    {...register(\"phone\", { required: !selectedAddress && \"Telefon numarası zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    defaultValue={selectedAddress ? selectedAddress.phone : \"\"}\n                    onChange={(e) => setSelectedAddress({ ...selectedAddress, phone: e.target.value, _id: null })}\n                  />\n                  {errors.phone && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.phone.message}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Ödeme Yöntemi Seçimi Bölümü */}\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <CreditCard className=\"mr-2\" /> Ödeme Yöntemi Seçin\n            </h2>\n            <div className=\"space-y-3\">\n              {/* Kapıda Ödeme Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"cashOnDelivery\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"cashOnDelivery\"\n                  checked={selectedPaymentMethod === \"cashOnDelivery\"}\n                  onChange={() => handlePaymentMethodSelect(\"cashOnDelivery\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kapıda Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Ürünleri teslim alırken nakit veya kart ile ödeme yapabilirsiniz.</p>\n              </label>\n\n              {/* Kayıtlı Kartlar Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"creditCard\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"creditCard\"\n                  checked={selectedPaymentMethod === \"creditCard\"}\n                  onChange={() => handlePaymentMethodSelect(\"creditCard\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kayıtlı Kredi Kartı ile Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Kaydedilmiş kartlarınızdan birini seçin.</p>\n              </label>\n              \n              {selectedPaymentMethod === \"creditCard\" && (\n                <div className=\"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\">\n                  <h3 className=\"text-lg font-semibold mb-3\">Kayıtlı Kartlarım</h3>\n                  {paymentMethods.length === 0 ? (\n                    <p className=\"text-gray-400 text-sm mb-4\">Henüz kayıtlı kartınız bulunmamaktadır.</p>\n                  ) : (\n                    <div className=\"grid grid-cols-1 gap-3 mb-4\">\n                      {paymentMethods.map((card) => (\n                        <label\n                          key={card._id}\n                          className={`flex items-center p-3 border rounded-md cursor-pointer ${\n                            selectedSavedCard && selectedSavedCard._id === card._id\n                              ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\"\n                              : \"border-gray-500 hover:border-gray-400 bg-gray-600\"\n                          }`}\n                        >\n                          <input\n                            type=\"radio\"\n                            name=\"savedCard\"\n                            value={card._id}\n                            checked={selectedSavedCard && selectedSavedCard._id === card._id}\n                            onChange={() => handleSavedCardSelect(card)}\n                            className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                          />\n                          <div className=\"flex-grow\">\n                            <p className=\"font-medium\">{card.cardHolderName} ({card.cardType || \"Kart\"})</p>\n                            <p className=\"text-sm text-gray-300\">**** **** **** {card.cardNumberLast4}</p>\n                            <p className=\"text-xs text-gray-400\">Son Kullanma: {card.expiryMonth}/{card.expiryYear}</p>\n                          </div>\n                          {card.isDefault && (\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                              Varsayılan\n                            </span>\n                          )}\n                        </label>\n                      ))}\n                    </div>\n                  )}\n\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowNewCardForm(!showNewCardForm)}\n                    className=\"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\"\n                  >\n                    <PlusCircle size={18} className=\"mr-2\" />\n                    {showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"}\n                  </button>\n\n                  {showNewCardForm && (\n                    <div className=\"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\">\n                      <h4 className=\"text-md font-semibold mb-3\">Yeni Kart Bilgileri</h4>\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <div>\n                          <label htmlFor=\"cardHolderName\" className=\"block text-sm font-medium text-gray-300\">Kart Üzerindeki İsim</label>\n                          <input type=\"text\" id=\"cardHolderName\" name=\"cardHolderName\" value={newCardData.cardHolderName} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required />\n                        </div>\n                        <div>\n                          <label htmlFor=\"cardNumber\" className=\"block text-sm font-medium text-gray-300\">Kart Numarası</label>\n                          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\" value={newCardData.cardNumber} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required maxLength=\"16\" />\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <div>\n                            <label htmlFor=\"expiryMonth\" className=\"block text-sm font-medium text-gray-300\">Ay (AA)</label>\n                            <input type=\"text\" id=\"expiryMonth\" name=\"expiryMonth\" value={newCardData.expiryMonth} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"MM\" required maxLength=\"2\" />\n                          </div>\n                          <div>\n                            <label htmlFor=\"expiryYear\" className=\"block text-sm font-medium text-gray-300\">Yıl (YY)</label>\n                            <input type=\"text\" id=\"expiryYear\" name=\"expiryYear\" value={newCardData.expiryYear} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"YY\" required maxLength=\"2\" />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center mt-2\">\n                          <input type=\"checkbox\" id=\"isDefaultCard\" name=\"isDefault\" checked={newCardData.isDefault} onChange={handleNewCardInputChange} className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\" />\n                          <label htmlFor=\"isDefaultCard\" className=\"ml-2 block text-sm font-medium text-gray-300\">Varsayılan Kart Yap</label>\n                        </div>\n                        <button type=\"button\" onClick={handleSaveNewCard} disabled={loading} className={`w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}>\n                          {loading ? <Loader2 className=\"animate-spin mr-2\" /> : <PenTool className=\"mr-2\" />} Kartı Kaydet\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                  {/* Kart yönetimi için \"Profil / Ödeme Yöntemlerim\" sayfasına yönlendirme ikonu eklenebilir */}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading || !selectedAddress || (!selectedSavedCard && selectedPaymentMethod === \"creditCard\") || cartItems.length === 0}\n            className={`w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${\n              loading || !selectedAddress || (!selectedSavedCard && selectedPaymentMethod === \"creditCard\") || cartItems.length === 0\n                ? \"bg-gray-600 cursor-not-allowed\"\n                : \"bg-green-600 hover:bg-green-700\"\n            }`}\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"animate-spin mr-2\" /> Sipariş Veriliyor...\n              </>\n            ) : (\n              \"Siparişi Onayla\"\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}