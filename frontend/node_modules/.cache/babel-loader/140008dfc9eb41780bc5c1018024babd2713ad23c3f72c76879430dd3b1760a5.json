{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\asdas2\\\\frontend\\\\src\\\\pages\\\\Payment.jsx\",\n  _s = $RefreshSig$();\n// frontend/pages/Payment.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport { fetchUserAddresses, fetchUserPaymentMethods, addPaymentMethod } from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\"; // Yeni ikonlar eklendi\nimport { toast } from \"react-toastify\"; // Bildirimler için\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Payment = () => {\n  _s();\n  const {\n    cartItems,\n    total,\n    clearCart\n  } = useCart();\n  const {\n    token,\n    isAuthenticated,\n    loading: authLoading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\"); // Varsayılan Kapıda Ödeme\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true); // Adres ve kartları çekme durumu\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false); // Yeni kart formu gösterme/gizleme\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false\n  });\n\n  // Yeni: Sahte onay kodu states\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    }\n  } = useForm();\n\n  // Sepet boşsa veya oturum açılmamışsa yönlendirme\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", {\n          replace: true\n        });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\"); // Toast bildirimi\n        // İsteğe bağlı olarak ana sayfaya yönlendirme: navigate(\"/\", { replace: true });\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find(addr => addr.isDefault);\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr); // Handler kullanarak form değerlerini ayarla\n          } else if (fetchedAddresses.length > 0) {\n            handleAddressSelect(fetchedAddresses[0]); // Varsayılan yoksa ilkini seç\n          }\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find(pm => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard); // Varsayılan kartı seçmek için handler kullan\n            // setSelectedPaymentMethod(\"creditCard\"); // handleSavedCardSelect içinde ayarlanıyor\n          } else if (fetchedPaymentMethods.length > 0) {\n            handleSavedCardSelect(fetchedPaymentMethods[0]); // Varsayılan kart yoksa ilkini seç\n            // setSelectedPaymentMethod(\"creditCard\");\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems]);\n\n  // Adres seçimi değiştiğinde form alanlarını güncelle\n  const handleAddressSelect = address => {\n    setSelectedAddress(address);\n    // Kayıtlı adres seçildiğinde manuel giriş alanlarını boşalt\n    setValue(\"address\", \"\");\n    setValue(\"city\", \"\");\n    setValue(\"postalCode\", \"\");\n    setValue(\"country\", \"\");\n    setValue(\"phone\", \"\");\n    // Eğer manuel girişler için validation error varsa temizle\n    clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n  };\n\n  // Ödeme yöntemi türü seçimi değiştiğinde\n  const handlePaymentMethodTypeSelect = method => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false); // Ödeme yöntemi değiştiğinde onay kodu inputunu gizle\n    setVerificationCode(\"\"); // Kodu temizle\n    setCodeError(\"\"); // Hata mesajını temizle\n\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null); // Kapıda ödeme seçildiyse kayıtlı kartı sıfırla\n    }\n    // Eğer kredi kartı seçildiğinde kayıtlı kart yoksa, yeni kart formu açılabilir (isteğe bağlı)\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  };\n\n  // Kayıtlı kart seçimi değiştiğinde\n  const handleSavedCardSelect = card => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\"); // Kayıtlı kart seçilince otomatik kart ödemeyi seç\n    setShowNewCardForm(false); // Kayıtlı kart seçince yeni kart formunu gizle\n  };\n\n  // Yeni kart formu input değişimi\n  const handleNewCardInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n\n  // Yeni kartı kaydetme işlemi\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (!newCardData.cardHolderName || !newCardData.cardNumber || !newCardData.expiryMonth || !newCardData.expiryYear) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      // Basit kart tipi belirleme (görsel amaçlı, backend doğrulamalıdır)\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        // Backend bunu işleyecek\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        // Backend işlemesi için kart tipini dahil et\n        isDefault: newCardData.isDefault\n      };\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false); // Formu kapat\n      setNewCardData({\n        // Formu sıfırla\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n\n      // Yeni eklenen kartı otomatik seç (son 4 hanesine göre bulunabilirse)\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(pm => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits);\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sipariş oluşturma işlemini başlatan ana fonksiyon\n  const handleInitiateOrder = async data => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n\n    // Adres kontrolü\n    let finalShippingInfo;\n    if (selectedAddress && selectedAddress._id) {\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone\n      };\n    } else {\n      // Eğer hiç kayıtlı adres seçilmemişse veya manuel adres girilmişse, formdaki değerleri kullan\n      finalShippingInfo = {\n        address: data.address,\n        city: data.city,\n        postalCode: data.postalCode,\n        country: data.country,\n        phone: data.phone\n      };\n      if (!finalShippingInfo.address || !finalShippingInfo.city || !finalShippingInfo.postalCode || !finalShippingInfo.country || !finalShippingInfo.phone) {\n        setErrorMessage(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n        toast.error(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n        return;\n      }\n    }\n\n    // Ödeme yöntemi kontrolü ve onay kodu akışı\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      setShowVerificationInput(true); // Kredi kartı seçiliyse onay kodu inputunu göster\n      return; // Sipariş oluşturma işlemini burada durdur, kod bekleniyor\n    }\n\n    // Diğer ödeme yöntemleri için doğrudan siparişi tamamla\n    await finalizeOrder(finalShippingInfo);\n  };\n\n  // Sahte onay kodu doğrulama\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") {\n      // Sahte onay kodu\n      setShowVerificationInput(false); // Doğrulama inputunu kapat\n      setVerificationCode(\"\"); // Kodu temizle\n      // Siparişi tamamlamak için onSubmit'e geçilen adres bilgilerini tekrar oluştur\n      let finalShippingInfo;\n      if (selectedAddress && selectedAddress._id) {\n        finalShippingInfo = {\n          address: selectedAddress.address,\n          city: selectedAddress.city,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone\n        };\n      } else {\n        // Eğer manuel giriş yapıldıysa, formdaki güncel değerleri kullan (riskli olabilir, form state'i güncel olmayabilir)\n        // Daha güvenli bir yaklaşım: form verilerini burada yeniden toplayın veya onSubmit'ten gelen 'data'yı saklayın\n        // Şimdilik varsayımsal olarak \"manuel girilen adres\" varsayımıyla gidiyoruz.\n        finalShippingInfo = {\n          address: register(\"address\").value,\n          // React Hook Form'dan doğrudan değer al\n          city: register(\"city\").value,\n          postalCode: register(\"postalCode\").value,\n          country: register(\"country\").value,\n          phone: register(\"phone\").value\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\"); // Kodu temizle\n    }\n  };\n\n  // Siparişi API'ye gönderen fonksiyon\n  const finalizeOrder = async shippingInfo => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map(item => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price\n        })),\n        shippingInfo: shippingInfo,\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          // Kredi kartı ise detaylarını ekle\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName\n          })\n        },\n        totalPrice: total,\n        status: \"Beklemede\"\n      };\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice\n        }\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sepet boşsa veya veri çekiliyorsa bekleme ekranı\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\",\n      children: cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-red-400\",\n        children: \"Sepetiniz bo\\u015F. L\\xFCtfen \\xF6nce \\xFCr\\xFCn ekleyin.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 44\n        }, this), \"Y\\xFCkleniyor...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-6 text-center text-purple-400\",\n        children: \"Sipari\\u015Fi Tamamla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 bg-gray-700 p-4 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4 text-green-400\",\n          children: [\"Toplam Tutar: \\u20BA\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), \" \", errorMessage]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), \" \", codeError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleInitiateOrder),\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), \" Teslimat Adresi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), addresses.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400 mb-4\",\n            children: \"Kay\\u0131tl\\u0131 adresiniz bulunmamaktad\\u0131r. L\\xFCtfen a\\u015Fa\\u011F\\u0131daki formu doldurun.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n            children: addresses.map(addr => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedAddress && selectedAddress._id === addr._id ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"shippingAddress\",\n                value: addr._id,\n                checked: selectedAddress && selectedAddress._id === addr._id,\n                onChange: () => handleAddressSelect(addr),\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-grow\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-semibold text-lg\",\n                    children: addr.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 405,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-300 text-sm\",\n                    children: addr.address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 406,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [addr.city, \", \", addr.postalCode, \", \", addr.country]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [\"Tel: \", addr.phone]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this), addr.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                  children: \"Varsay\\u0131lan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 21\n              }, this)]\n            }, addr._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-3\",\n              children: \"Veya Yeni Adres Bilgilerini Girin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"addressInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"addressInput\",\n                  type: \"text\",\n                  ...register(\"address\", {\n                    required: !selectedAddress && \"Adres zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                  // Eğer kayıtlı adres seçiliyse, manuel alanları boş bırak, aksi takdirde değeri göster\n                  // Burada varsayılan değeri doğrudan atamak yerine, kullanıcı manuel giriş yaptığında\n                  // selectedAddress'ı null yapıp react-hook-form'un kendi state'ini kullanmak daha iyidir.\n                  // onChange ile selectedAddress'i null yapma mantığı korunmalıdır.\n                  ,\n                  onChange: e => {\n                    setValue(\"address\", e.target.value); // Form state'ini güncelle\n                    setSelectedAddress(null); // Kayıtlı adresi sıfırla\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this), errors.address && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.address.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"cityInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\u015Eehir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"cityInput\",\n                  type: \"text\",\n                  ...register(\"city\", {\n                    required: !selectedAddress && \"Şehir zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"city\", e.target.value);\n                    setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 19\n                }, this), errors.city && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.city.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"postalCodeInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Posta Kodu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"postalCodeInput\",\n                  type: \"text\",\n                  ...register(\"postalCode\", {\n                    required: !selectedAddress && \"Posta kodu zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"postalCode\", e.target.value);\n                    setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this), errors.postalCode && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.postalCode.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"countryInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\xDClke\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"countryInput\",\n                  type: \"text\",\n                  ...register(\"country\", {\n                    required: !selectedAddress && \"Ülke zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"country\", e.target.value);\n                    setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 19\n                }, this), errors.country && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.country.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"phoneInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Telefon Numaras\\u0131\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"phoneInput\",\n                  type: \"text\",\n                  ...register(\"phone\", {\n                    required: !selectedAddress && \"Telefon numarası zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"phone\", e.target.value);\n                    setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 19\n                }, this), errors.phone && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.phone.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), \" \\xD6deme Y\\xF6ntemi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"cashOnDelivery\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"cashOnDelivery\",\n                checked: selectedPaymentMethod === \"cashOnDelivery\",\n                onChange: () => handlePaymentMethodTypeSelect(\"cashOnDelivery\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kap\\u0131da \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"\\xDCr\\xFCnleri teslim al\\u0131rken nakit veya kart ile \\xF6deme yapabilirsiniz.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"creditCard\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"creditCard\",\n                checked: selectedPaymentMethod === \"creditCard\",\n                onChange: () => handlePaymentMethodTypeSelect(\"creditCard\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kredi Kart\\u0131 ile \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"Kaydedilmi\\u015F kartlar\\u0131n\\u0131zdan birini se\\xE7in veya yeni bir kart ekleyin.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold mb-3\",\n                children: \"Kay\\u0131tl\\u0131 Kartlar\\u0131m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 19\n              }, this), paymentMethods.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-400 text-sm mb-4\",\n                children: \"Hen\\xFCz kay\\u0131tl\\u0131 kart\\u0131n\\u0131z bulunmamaktad\\u0131r.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 gap-3 mb-4\",\n                children: paymentMethods.map(card => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `flex items-center p-3 border rounded-md cursor-pointer ${selectedSavedCard && selectedSavedCard._id === card._id ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\" : \"border-gray-500 hover:border-gray-400 bg-gray-600\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"savedCard\",\n                    value: card._id,\n                    checked: selectedSavedCard && selectedSavedCard._id === card._id,\n                    onChange: () => handleSavedCardSelect(card),\n                    className: \"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 585,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-grow\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: [card.cardHolderName, \" (\", card.cardType || \"Kart\", \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 594,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-300\",\n                      children: [\"**** **** **** \", card.cardNumberLast4]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 595,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-400\",\n                      children: [\"Son Kullanma: \", card.expiryMonth, \"/\", card.expiryYear]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 596,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 593,\n                    columnNumber: 27\n                  }, this), card.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                    children: \"Varsay\\u0131lan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 29\n                  }, this)]\n                }, card._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowNewCardForm(!showNewCardForm);\n                  setSelectedSavedCard(null); // Yeni kart formu açıldığında kayıtlı kart seçimini sıfırla\n                },\n                className: \"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 21\n                }, this), showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 19\n              }, this), showNewCardForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-semibold mb-3\",\n                  children: \"Yeni Kart Bilgileri\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardHolderName\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart \\xDCzerindeki \\u0130sim\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 625,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardHolderName\",\n                      name: \"cardHolderName\",\n                      value: newCardData.cardHolderName,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 626,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 624,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardNumber\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart Numaras\\u0131\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 629,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardNumber\",\n                      name: \"cardNumber\",\n                      value: newCardData.cardNumber,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true,\n                      maxLength: \"16\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 630,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 628,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryMonth\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Ay (AA)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 634,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryMonth\",\n                        name: \"expiryMonth\",\n                        value: newCardData.expiryMonth,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"MM\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 635,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 633,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryYear\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Y\\u0131l (YY)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 638,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryYear\",\n                        name: \"expiryYear\",\n                        value: newCardData.expiryYear,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"YY\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 639,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 637,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center mt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"isDefaultCard\",\n                      name: \"isDefault\",\n                      checked: newCardData.isDefault,\n                      onChange: handleNewCardInputChange,\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 643,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"isDefaultCard\",\n                      className: \"ml-2 block text-sm font-medium text-gray-300\",\n                      children: \"Varsay\\u0131lan Kart Yap\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 644,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: handleSaveNewCard,\n                    disabled: loading,\n                    className: `w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`,\n                    children: [loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 647,\n                      columnNumber: 38\n                    }, this) : /*#__PURE__*/_jsxDEV(PenTool, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 647,\n                      columnNumber: 82\n                    }, this), \" Kart\\u0131 Kaydet\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 646,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), showVerificationInput && selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 17\n            }, this), \" Kredi Kart\\u0131 G\\xFCvenlik Onay\\u0131\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300 mb-4\",\n            children: \"G\\xFCvenli\\u011Finiz i\\xE7in, kredi kart\\u0131 sahibinin kay\\u0131tl\\u0131 telefon numaras\\u0131na g\\xF6nderilen 4 haneli kodu giriniz.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            maxLength: \"4\",\n            value: verificationCode,\n            onChange: e => setVerificationCode(e.target.value),\n            placeholder: \"Onay Kodu (\\xF6rn: 1234)\",\n            className: \"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\",\n            inputMode: \"numeric\",\n            pattern: \"[0-9]*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 15\n          }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-sm text-orange-400 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"mr-1\",\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 19\n            }, this), \" \", codeError]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\" // Form submit etmemesi için type=\"button\"\n            ,\n            onClick: handleVerifyCode,\n            className: \"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\",\n            disabled: loading || verificationCode.length !== 4,\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 21\n              }, this), \" Do\\u011Frulan\\u0131yor...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 21\n              }, this), \" Kodu Do\\u011Frula ve Sipari\\u015Fi Onayla\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 13\n        }, this), !showVerificationInput && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading || !selectedAddress || selectedPaymentMethod === \"creditCard\" && !selectedSavedCard || cartItems.length === 0,\n          className: `w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${loading || !selectedAddress || selectedPaymentMethod === \"creditCard\" && !selectedSavedCard || cartItems.length === 0 ? \"bg-gray-600 cursor-not-allowed\" : \"bg-green-600 hover:bg-green-700\"}`,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 19\n            }, this), \" Sipari\\u015F Veriliyor...\"]\n          }, void 0, true) : \"Siparişi Onayla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/cart\"),\n        className: \"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"mr-2\",\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 11\n        }, this), \" Sepete Geri D\\xF6n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"aEb1TPwOu4lzjYwD4BbJ9cKih+k=\", false, function () {\n  return [useCart, useAuth, useNavigate, useForm];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCart","useAuth","createOrder","fetchUserAddresses","fetchUserPaymentMethods","addPaymentMethod","useForm","MapPin","CreditCard","Loader2","PlusCircle","PenTool","CheckCircle","XCircle","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","Payment","_s","cartItems","total","clearCart","token","isAuthenticated","loading","authLoading","navigate","addresses","setAddresses","paymentMethods","setPaymentMethods","selectedAddress","setSelectedAddress","selectedPaymentMethod","setSelectedPaymentMethod","selectedSavedCard","setSelectedSavedCard","setLoading","errorMessage","setErrorMessage","fetchingData","setFetchingData","showNewCardForm","setShowNewCardForm","newCardData","setNewCardData","cardHolderName","cardNumber","expiryMonth","expiryYear","isDefault","showVerificationInput","setShowVerificationInput","verificationCode","setVerificationCode","codeError","setCodeError","register","handleSubmit","setValue","formState","errors","replace","length","info","fetchData","fetchedAddresses","defaultAddr","find","addr","handleAddressSelect","fetchedPaymentMethods","defaultCard","pm","handleSavedCardSelect","err","console","error","message","address","clearErrors","handlePaymentMethodTypeSelect","method","card","handleNewCardInputChange","e","name","value","type","checked","target","handleSaveNewCard","cardType","test","cardToSave","updatedPaymentMethods","success","last4Digits","slice","newlyAddedCard","cardNumberLast4","handleInitiateOrder","data","finalShippingInfo","_id","city","postalCode","country","phone","finalizeOrder","handleVerifyCode","shippingInfo","orderData","products","map","item","product","quantity","price","discountPrice","paymentMethod","cardId","last4","totalPrice","status","createdOrder","state","orderId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","size","onSubmit","onChange","title","htmlFor","id","required","onClick","maxLength","placeholder","disabled","inputMode","pattern","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/asdas2/frontend/src/pages/Payment.jsx"],"sourcesContent":["// frontend/pages/Payment.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport {\n  fetchUserAddresses,\n  fetchUserPaymentMethods,\n  addPaymentMethod,\n} from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\"; // Yeni ikonlar eklendi\nimport { toast } from \"react-toastify\"; // Bildirimler için\n\nconst Payment = () => {\n  const { cartItems, total, clearCart } = useCart();\n  const { token, isAuthenticated, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\"); // Varsayılan Kapıda Ödeme\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true); // Adres ve kartları çekme durumu\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false); // Yeni kart formu gösterme/gizleme\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false,\n  });\n\n  // Yeni: Sahte onay kodu states\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n  } = useForm();\n\n  // Sepet boşsa veya oturum açılmamışsa yönlendirme\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", { replace: true });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\"); // Toast bildirimi\n        // İsteğe bağlı olarak ana sayfaya yönlendirme: navigate(\"/\", { replace: true });\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find((addr) => addr.isDefault);\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr); // Handler kullanarak form değerlerini ayarla\n          } else if (fetchedAddresses.length > 0) {\n            handleAddressSelect(fetchedAddresses[0]); // Varsayılan yoksa ilkini seç\n          }\n\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find((pm) => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard); // Varsayılan kartı seçmek için handler kullan\n            // setSelectedPaymentMethod(\"creditCard\"); // handleSavedCardSelect içinde ayarlanıyor\n          } else if (fetchedPaymentMethods.length > 0) {\n            handleSavedCardSelect(fetchedPaymentMethods[0]); // Varsayılan kart yoksa ilkini seç\n            // setSelectedPaymentMethod(\"creditCard\");\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems]);\n\n  // Adres seçimi değiştiğinde form alanlarını güncelle\n  const handleAddressSelect = (address) => {\n    setSelectedAddress(address);\n    // Kayıtlı adres seçildiğinde manuel giriş alanlarını boşalt\n    setValue(\"address\", \"\");\n    setValue(\"city\", \"\");\n    setValue(\"postalCode\", \"\");\n    setValue(\"country\", \"\");\n    setValue(\"phone\", \"\");\n    // Eğer manuel girişler için validation error varsa temizle\n    clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n  };\n\n  // Ödeme yöntemi türü seçimi değiştiğinde\n  const handlePaymentMethodTypeSelect = (method) => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false); // Ödeme yöntemi değiştiğinde onay kodu inputunu gizle\n    setVerificationCode(\"\"); // Kodu temizle\n    setCodeError(\"\"); // Hata mesajını temizle\n\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null); // Kapıda ödeme seçildiyse kayıtlı kartı sıfırla\n    }\n    // Eğer kredi kartı seçildiğinde kayıtlı kart yoksa, yeni kart formu açılabilir (isteğe bağlı)\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  };\n\n  // Kayıtlı kart seçimi değiştiğinde\n  const handleSavedCardSelect = (card) => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\"); // Kayıtlı kart seçilince otomatik kart ödemeyi seç\n    setShowNewCardForm(false); // Kayıtlı kart seçince yeni kart formunu gizle\n  };\n\n  // Yeni kart formu input değişimi\n  const handleNewCardInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value,\n    });\n  };\n\n  // Yeni kartı kaydetme işlemi\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (\n        !newCardData.cardHolderName ||\n        !newCardData.cardNumber ||\n        !newCardData.expiryMonth ||\n        !newCardData.expiryYear\n      ) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      // Basit kart tipi belirleme (görsel amaçlı, backend doğrulamalıdır)\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";\n      else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";\n      else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber, // Backend bunu işleyecek\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType, // Backend işlemesi için kart tipini dahil et\n        isDefault: newCardData.isDefault,\n      };\n\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false); // Formu kapat\n      setNewCardData({ // Formu sıfırla\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false,\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n\n      // Yeni eklenen kartı otomatik seç (son 4 hanesine göre bulunabilirse)\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(\n        (pm) => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits\n      );\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sipariş oluşturma işlemini başlatan ana fonksiyon\n  const handleInitiateOrder = async (data) => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n\n    // Adres kontrolü\n    let finalShippingInfo;\n    if (selectedAddress && selectedAddress._id) {\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone,\n      };\n    } else {\n      // Eğer hiç kayıtlı adres seçilmemişse veya manuel adres girilmişse, formdaki değerleri kullan\n      finalShippingInfo = {\n        address: data.address,\n        city: data.city,\n        postalCode: data.postalCode,\n        country: data.country,\n        phone: data.phone,\n      };\n      if (!finalShippingInfo.address || !finalShippingInfo.city || !finalShippingInfo.postalCode || !finalShippingInfo.country || !finalShippingInfo.phone) {\n        setErrorMessage(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n        toast.error(\"Lütfen geçerli bir teslimat adresi girin veya seçin.\");\n        return;\n      }\n    }\n\n    // Ödeme yöntemi kontrolü ve onay kodu akışı\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      setShowVerificationInput(true); // Kredi kartı seçiliyse onay kodu inputunu göster\n      return; // Sipariş oluşturma işlemini burada durdur, kod bekleniyor\n    }\n\n    // Diğer ödeme yöntemleri için doğrudan siparişi tamamla\n    await finalizeOrder(finalShippingInfo);\n  };\n\n  // Sahte onay kodu doğrulama\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") { // Sahte onay kodu\n      setShowVerificationInput(false); // Doğrulama inputunu kapat\n      setVerificationCode(\"\"); // Kodu temizle\n      // Siparişi tamamlamak için onSubmit'e geçilen adres bilgilerini tekrar oluştur\n      let finalShippingInfo;\n      if (selectedAddress && selectedAddress._id) {\n        finalShippingInfo = {\n          address: selectedAddress.address,\n          city: selectedAddress.city,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone,\n        };\n      } else {\n        // Eğer manuel giriş yapıldıysa, formdaki güncel değerleri kullan (riskli olabilir, form state'i güncel olmayabilir)\n        // Daha güvenli bir yaklaşım: form verilerini burada yeniden toplayın veya onSubmit'ten gelen 'data'yı saklayın\n        // Şimdilik varsayımsal olarak \"manuel girilen adres\" varsayımıyla gidiyoruz.\n        finalShippingInfo = {\n          address: register(\"address\").value, // React Hook Form'dan doğrudan değer al\n          city: register(\"city\").value,\n          postalCode: register(\"postalCode\").value,\n          country: register(\"country\").value,\n          phone: register(\"phone\").value,\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\"); // Kodu temizle\n    }\n  };\n\n  // Siparişi API'ye gönderen fonksiyon\n  const finalizeOrder = async (shippingInfo) => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map((item) => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price,\n        })),\n        shippingInfo: shippingInfo,\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          // Kredi kartı ise detaylarını ekle\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName,\n          }),\n        },\n        totalPrice: total,\n        status: \"Beklemede\",\n      };\n\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice,\n        },\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sepet boşsa veya veri çekiliyorsa bekleme ekranı\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\">\n        {cartItems.length === 0 ? (\n          <p className=\"text-center text-red-400\">Sepetiniz boş. Lütfen önce ürün ekleyin.</p>\n        ) : (\n          <p className=\"flex items-center\"><Loader2 className=\"animate-spin mr-2\" />Yükleniyor...</p>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\">\n      <div className=\"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-purple-400\">Siparişi Tamamla</h1>\n\n        <div className=\"mb-6 bg-gray-700 p-4 rounded-lg\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-green-400\">\n            Toplam Tutar: ₺{total.toFixed(2)}\n          </h2>\n        </div>\n\n        {errorMessage && (\n          <p className=\"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {errorMessage}\n          </p>\n        )}\n        {codeError && (\n          <p className=\"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {codeError}\n          </p>\n        )}\n\n        <form onSubmit={handleSubmit(handleInitiateOrder)} className=\"space-y-6\">\n          {/* Adres Seçimi Bölümü */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <MapPin className=\"mr-2\" /> Teslimat Adresi Seçin\n            </h2>\n            {addresses.length === 0 ? (\n              <p className=\"text-gray-400 mb-4\">Kayıtlı adresiniz bulunmamaktadır. Lütfen aşağıdaki formu doldurun.</p>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {addresses.map((addr) => (\n                  <label\n                    key={addr._id}\n                    className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                      selectedAddress && selectedAddress._id === addr._id\n                        ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                        : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"shippingAddress\"\n                      value={addr._id}\n                      checked={selectedAddress && selectedAddress._id === addr._id}\n                      onChange={() => handleAddressSelect(addr)}\n                      className=\"hidden\"\n                    />\n                    <div className=\"flex items-start\">\n                      <div className=\"flex-grow\">\n                        <p className=\"font-semibold text-lg\">{addr.title}</p>\n                        <p className=\"text-gray-300 text-sm\">{addr.address}</p>\n                        <p className=\"text-gray-400 text-xs\">{addr.city}, {addr.postalCode}, {addr.country}</p>\n                        <p className=\"text-gray-400 text-xs\">Tel: {addr.phone}</p>\n                      </div>\n                      {addr.isDefault && (\n                        <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                          Varsayılan\n                        </span>\n                      )}\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            {/* Yeni adres ekleme formu (manuel giriş için) - Sadece kayıtlı adres seçili değilse doldurulması zorunlu */}\n            <div className=\"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\">\n              <h3 className=\"text-lg font-semibold mb-3\">Veya Yeni Adres Bilgilerini Girin</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label htmlFor=\"addressInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres\n                  </label>\n                  <input\n                    id=\"addressInput\"\n                    type=\"text\"\n                    {...register(\"address\", { required: !selectedAddress && \"Adres zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    // Eğer kayıtlı adres seçiliyse, manuel alanları boş bırak, aksi takdirde değeri göster\n                    // Burada varsayılan değeri doğrudan atamak yerine, kullanıcı manuel giriş yaptığında\n                    // selectedAddress'ı null yapıp react-hook-form'un kendi state'ini kullanmak daha iyidir.\n                    // onChange ile selectedAddress'i null yapma mantığı korunmalıdır.\n                    onChange={(e) => {\n                        setValue(\"address\", e.target.value); // Form state'ini güncelle\n                        setSelectedAddress(null); // Kayıtlı adresi sıfırla\n                    }}\n                  />\n                  {errors.address && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.address.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"cityInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Şehir\n                  </label>\n                  <input\n                    id=\"cityInput\"\n                    type=\"text\"\n                    {...register(\"city\", { required: !selectedAddress && \"Şehir zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"city\", e.target.value);\n                        setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.city && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.city.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"postalCodeInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Posta Kodu\n                  </label>\n                  <input\n                    id=\"postalCodeInput\"\n                    type=\"text\"\n                    {...register(\"postalCode\", { required: !selectedAddress && \"Posta kodu zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"postalCode\", e.target.value);\n                        setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.postalCode && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.postalCode.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"countryInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Ülke\n                  </label>\n                  <input\n                    id=\"countryInput\"\n                    type=\"text\"\n                    {...register(\"country\", { required: !selectedAddress && \"Ülke zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"country\", e.target.value);\n                        setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.country && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.country.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"phoneInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Telefon Numarası\n                  </label>\n                  <input\n                    id=\"phoneInput\"\n                    type=\"text\"\n                    {...register(\"phone\", { required: !selectedAddress && \"Telefon numarası zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"phone\", e.target.value);\n                        setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.phone && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.phone.message}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Ödeme Yöntemi Seçimi Bölümü */}\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <CreditCard className=\"mr-2\" /> Ödeme Yöntemi Seçin\n            </h2>\n            <div className=\"space-y-3\">\n              {/* Kapıda Ödeme Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"cashOnDelivery\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"cashOnDelivery\"\n                  checked={selectedPaymentMethod === \"cashOnDelivery\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"cashOnDelivery\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kapıda Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Ürünleri teslim alırken nakit veya kart ile ödeme yapabilirsiniz.</p>\n              </label>\n\n              {/* Kayıtlı Kartlar Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"creditCard\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"creditCard\"\n                  checked={selectedPaymentMethod === \"creditCard\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"creditCard\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kredi Kartı ile Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Kaydedilmiş kartlarınızdan birini seçin veya yeni bir kart ekleyin.</p>\n              </label>\n\n              {selectedPaymentMethod === \"creditCard\" && (\n                <div className=\"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\">\n                  <h3 className=\"text-lg font-semibold mb-3\">Kayıtlı Kartlarım</h3>\n                  {paymentMethods.length === 0 ? (\n                    <p className=\"text-gray-400 text-sm mb-4\">Henüz kayıtlı kartınız bulunmamaktadır.</p>\n                  ) : (\n                    <div className=\"grid grid-cols-1 gap-3 mb-4\">\n                      {paymentMethods.map((card) => (\n                        <label\n                          key={card._id}\n                          className={`flex items-center p-3 border rounded-md cursor-pointer ${\n                            selectedSavedCard && selectedSavedCard._id === card._id\n                              ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\"\n                              : \"border-gray-500 hover:border-gray-400 bg-gray-600\"\n                          }`}\n                        >\n                          <input\n                            type=\"radio\"\n                            name=\"savedCard\"\n                            value={card._id}\n                            checked={selectedSavedCard && selectedSavedCard._id === card._id}\n                            onChange={() => handleSavedCardSelect(card)}\n                            className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                          />\n                          <div className=\"flex-grow\">\n                            <p className=\"font-medium\">{card.cardHolderName} ({card.cardType || \"Kart\"})</p>\n                            <p className=\"text-sm text-gray-300\">**** **** **** {card.cardNumberLast4}</p>\n                            <p className=\"text-xs text-gray-400\">Son Kullanma: {card.expiryMonth}/{card.expiryYear}</p>\n                          </div>\n                          {card.isDefault && (\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                              Varsayılan\n                            </span>\n                          )}\n                        </label>\n                      ))}\n                    </div>\n                  )}\n\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                        setShowNewCardForm(!showNewCardForm);\n                        setSelectedSavedCard(null); // Yeni kart formu açıldığında kayıtlı kart seçimini sıfırla\n                    }}\n                    className=\"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\"\n                  >\n                    <PlusCircle size={18} className=\"mr-2\" />\n                    {showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"}\n                  </button>\n\n                  {showNewCardForm && (\n                    <div className=\"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\">\n                      <h4 className=\"text-md font-semibold mb-3\">Yeni Kart Bilgileri</h4>\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <div>\n                          <label htmlFor=\"cardHolderName\" className=\"block text-sm font-medium text-gray-300\">Kart Üzerindeki İsim</label>\n                          <input type=\"text\" id=\"cardHolderName\" name=\"cardHolderName\" value={newCardData.cardHolderName} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required />\n                        </div>\n                        <div>\n                          <label htmlFor=\"cardNumber\" className=\"block text-sm font-medium text-gray-300\">Kart Numarası</label>\n                          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\" value={newCardData.cardNumber} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required maxLength=\"16\" />\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <div>\n                            <label htmlFor=\"expiryMonth\" className=\"block text-sm font-medium text-gray-300\">Ay (AA)</label>\n                            <input type=\"text\" id=\"expiryMonth\" name=\"expiryMonth\" value={newCardData.expiryMonth} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"MM\" required maxLength=\"2\" />\n                          </div>\n                          <div>\n                            <label htmlFor=\"expiryYear\" className=\"block text-sm font-medium text-gray-300\">Yıl (YY)</label>\n                            <input type=\"text\" id=\"expiryYear\" name=\"expiryYear\" value={newCardData.expiryYear} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"YY\" required maxLength=\"2\" />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center mt-2\">\n                          <input type=\"checkbox\" id=\"isDefaultCard\" name=\"isDefault\" checked={newCardData.isDefault} onChange={handleNewCardInputChange} className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\" />\n                          <label htmlFor=\"isDefaultCard\" className=\"ml-2 block text-sm font-medium text-gray-300\">Varsayılan Kart Yap</label>\n                        </div>\n                        <button type=\"button\" onClick={handleSaveNewCard} disabled={loading} className={`w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}>\n                          {loading ? <Loader2 className=\"animate-spin mr-2\" /> : <PenTool className=\"mr-2\" />} Kartı Kaydet\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Sahte Onay Kodu Girişi - Sadece Kredi Kartı seçildiğinde ve henüz kod doğrulanmadıysa görünür */}\n          {showVerificationInput && selectedPaymentMethod === \"creditCard\" && (\n            <div className=\"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\">\n              <h3 className=\"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\">\n                <CreditCard className=\"mr-2\" /> Kredi Kartı Güvenlik Onayı\n              </h3>\n              <p className=\"text-gray-300 mb-4\">\n                Güvenliğiniz için, kredi kartı sahibinin kayıtlı telefon numarasına gönderilen 4 haneli kodu giriniz.\n              </p>\n              <input\n                type=\"text\"\n                maxLength=\"4\"\n                value={verificationCode}\n                onChange={(e) => setVerificationCode(e.target.value)}\n                placeholder=\"Onay Kodu (örn: 1234)\"\n                className=\"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\"\n                inputMode=\"numeric\"\n                pattern=\"[0-9]*\"\n              />\n              {codeError && (\n                <p className=\"mt-2 text-sm text-orange-400 flex items-center justify-center\">\n                  <XCircle className=\"mr-1\" size={16} /> {codeError}\n                </p>\n              )}\n              <button\n                type=\"button\" // Form submit etmemesi için type=\"button\"\n                onClick={handleVerifyCode}\n                className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\"\n                disabled={loading || verificationCode.length !== 4}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"animate-spin mr-2\" /> Doğrulanıyor...\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle className=\"mr-2\" /> Kodu Doğrula ve Siparişi Onayla\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n\n          {/* Sipariş Onayla Butonu - Sadece onay kodu ekranı açık değilse görünür */}\n          {!showVerificationInput && (\n            <button\n              type=\"submit\"\n              disabled={loading || !selectedAddress || (selectedPaymentMethod === \"creditCard\" && !selectedSavedCard) || cartItems.length === 0}\n              className={`w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${\n                loading || !selectedAddress || (selectedPaymentMethod === \"creditCard\" && !selectedSavedCard) || cartItems.length === 0\n                  ? \"bg-gray-600 cursor-not-allowed\"\n                  : \"bg-green-600 hover:bg-green-700\"\n              }`}\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"animate-spin mr-2\" /> Sipariş Veriliyor...\n                </>\n              ) : (\n                \"Siparişi Onayla\"\n              )}\n            </button>\n          )}\n        </form>\n\n        <button\n          onClick={() => navigate(\"/cart\")}\n          className=\"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\"\n        >\n          <Loader2 className=\"mr-2\" size={18} /> Sepete Geri Dön\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}