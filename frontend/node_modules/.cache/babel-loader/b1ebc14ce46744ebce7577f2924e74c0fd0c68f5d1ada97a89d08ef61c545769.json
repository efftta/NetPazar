{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\asdas2\\\\frontend\\\\src\\\\pages\\\\Products.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useSearchParams } from \"react-router-dom\"; // useSearchParams eklendi\nimport CategoryList from \"../components/CategoryList\"; // Adını CategoryList olarak değiştirdim\nimport ProductCard from \"../components/ProductCard\";\nimport { fetchProductsByParams } from \"../api/productApi\"; // productApi içinde fetchProductsByParams olmalı\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [category, setCategory] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // const [searchQuery, setSearchQuery] = useState(\"\"); // Bu state'i SearchBar'dan alacağımız için kaldırıyoruz\n  const [error, setError] = useState(null);\n  const [searchParams] = useSearchParams(); // Yeni useSearchParams hook'u\n  const location = useLocation(); // Sadece URL değişimini dinlemek için\n\n  useEffect(() => {\n    // URL'deki \"filter\" parametresini al\n    const urlFilter = searchParams.get(\"filter\") || \"\";\n    setFilter(urlFilter);\n\n    // URL'deki \"search\" parametresini al\n    const urlSearchQuery = searchParams.get(\"search\") || \"\";\n    // setSearchQuery(urlSearchQuery); // Artık bu state'e ihtiyacımız yok, doğrudan fetch'e göndereceğiz\n  }, [searchParams]); // searchParams değiştiğinde çalışır\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setLoading(true);\n      setError(null); // Hata durumunu sıfırla\n\n      try {\n        const params = {};\n        if (category) params.category = category;\n        if (filter === \"bestseller\") params.isBestSeller = \"true\";\n        if (filter === \"campaign\") params.isCampaign = \"true\";\n        if (filter === \"new\") params.isNewProduct = \"true\";\n\n        // URL'deki arama terimini al ve params'a ekle\n        const currentSearchQuery = searchParams.get(\"search\");\n        if (currentSearchQuery) {\n          params.search = currentSearchQuery;\n        }\n        const fetchedProducts = await fetchProductsByParams(params);\n        setProducts(fetchedProducts);\n      } catch (err) {\n        console.error(\"Ürünler yüklenirken hata:\", err);\n        setError(\"Ürünler yüklenirken bir hata oluştu.\");\n        setProducts([]); // Hata durumunda ürünleri temizle\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProducts();\n  }, [category, filter, searchParams]); // searchParams bağımlılığı eklendi\n\n  // Filtre butonlarının dinamik sınıflandırması\n  const getFilterButtonClass = buttonFilter => `px-4 py-2 rounded-md text-sm font-medium transition-colors ${filter === buttonFilter ? \"bg-blue-600 text-white\" // Aktif filtre\n  : \"bg-gray-700 hover:bg-gray-600 text-white\" // Pasif filtre\n  }`;\n\n  // Eğer `CategoryList` componentiniz `Categories` olarak adlandırılmışsa\n  // `import Categories from \"../components/CategoryList\";` satırını `import CategoryList from \"../components/CategoryList\";` olarak düzeltmeniz gerekebilir.\n  // Veya eğer CategoryList'i direk bu dosyaya yapıştırdıysanız CategoryList import'una ihtiyacınız olmayabilir.\n  // Mevcut dosyanızda `import Categories from \"../components/CategoryList\";` yazıyor, bu da bir component adlandırma hatası olabilir.\n  // Ben Categories'i `CategoryList` olarak düzelttim. Eğer projenizde `Categories` adında bir komponent varsa düzeltmeniz gerekebilir.\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4 text-white min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(CategoryList, {\n      onCategorySelect: setCategory,\n      selectedCategory: category\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 my-4 flex-wrap\",\n      children: [{\n        label: \"Tümü\",\n        value: \"\"\n      }, {\n        label: \"Kampanyalar\",\n        value: \"campaign\"\n      }, {\n        label: \"Çok Satanlar\",\n        value: \"bestseller\"\n      }, {\n        label: \"Yeni Ürünler\",\n        value: \"new\"\n      }].map(btn => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setFilter(btn.value),\n        className: getFilterButtonClass(btn.value),\n        children: btn.label\n      }, btn.value, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-lg mt-10\",\n      children: \"\\xDCr\\xFCnler y\\xFCkleniyor...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-red-500 text-lg mt-10\",\n      children: [\"Hata: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }, this), !loading && !error && products.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-lg mt-10\",\n      children: \"Arad\\u0131\\u011F\\u0131n\\u0131z kriterlere uygun \\xFCr\\xFCn bulunamad\\u0131.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\",\n      children: !loading && !error && products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product\n      }, product._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 37\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Products, \"mI13NvNpvmKlmOnHXTTZxPGy9Qo=\", false, function () {\n  return [useSearchParams, useLocation];\n});\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useSearchParams","CategoryList","ProductCard","fetchProductsByParams","jsxDEV","_jsxDEV","Products","_s","products","setProducts","category","setCategory","filter","setFilter","loading","setLoading","error","setError","searchParams","location","urlFilter","get","urlSearchQuery","fetchProducts","params","isBestSeller","isCampaign","isNewProduct","currentSearchQuery","search","fetchedProducts","err","console","getFilterButtonClass","buttonFilter","className","children","onCategorySelect","selectedCategory","fileName","_jsxFileName","lineNumber","columnNumber","label","value","map","btn","onClick","length","product","_id","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/asdas2/frontend/src/pages/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation, useSearchParams } from \"react-router-dom\"; // useSearchParams eklendi\nimport CategoryList from \"../components/CategoryList\"; // Adını CategoryList olarak değiştirdim\nimport ProductCard from \"../components/ProductCard\";\nimport { fetchProductsByParams } from \"../api/productApi\"; // productApi içinde fetchProductsByParams olmalı\n\nconst Products = () => {\n  const [products, setProducts] = useState([]);\n  const [category, setCategory] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  // const [searchQuery, setSearchQuery] = useState(\"\"); // Bu state'i SearchBar'dan alacağımız için kaldırıyoruz\n  const [error, setError] = useState(null);\n\n  const [searchParams] = useSearchParams(); // Yeni useSearchParams hook'u\n  const location = useLocation(); // Sadece URL değişimini dinlemek için\n\n  useEffect(() => {\n    // URL'deki \"filter\" parametresini al\n    const urlFilter = searchParams.get(\"filter\") || \"\";\n    setFilter(urlFilter);\n\n    // URL'deki \"search\" parametresini al\n    const urlSearchQuery = searchParams.get(\"search\") || \"\";\n    // setSearchQuery(urlSearchQuery); // Artık bu state'e ihtiyacımız yok, doğrudan fetch'e göndereceğiz\n  }, [searchParams]); // searchParams değiştiğinde çalışır\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      setLoading(true);\n      setError(null); // Hata durumunu sıfırla\n\n      try {\n        const params = {};\n        if (category) params.category = category;\n        if (filter === \"bestseller\") params.isBestSeller = \"true\";\n        if (filter === \"campaign\") params.isCampaign = \"true\";\n        if (filter === \"new\") params.isNewProduct = \"true\";\n\n        // URL'deki arama terimini al ve params'a ekle\n        const currentSearchQuery = searchParams.get(\"search\");\n        if (currentSearchQuery) {\n          params.search = currentSearchQuery;\n        }\n\n        const fetchedProducts = await fetchProductsByParams(params);\n        setProducts(fetchedProducts);\n      } catch (err) {\n        console.error(\"Ürünler yüklenirken hata:\", err);\n        setError(\"Ürünler yüklenirken bir hata oluştu.\");\n        setProducts([]); // Hata durumunda ürünleri temizle\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, [category, filter, searchParams]); // searchParams bağımlılığı eklendi\n\n  // Filtre butonlarının dinamik sınıflandırması\n  const getFilterButtonClass = (buttonFilter) =>\n    `px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n      filter === buttonFilter\n        ? \"bg-blue-600 text-white\" // Aktif filtre\n        : \"bg-gray-700 hover:bg-gray-600 text-white\" // Pasif filtre\n    }`;\n\n  // Eğer `CategoryList` componentiniz `Categories` olarak adlandırılmışsa\n  // `import Categories from \"../components/CategoryList\";` satırını `import CategoryList from \"../components/CategoryList\";` olarak düzeltmeniz gerekebilir.\n  // Veya eğer CategoryList'i direk bu dosyaya yapıştırdıysanız CategoryList import'una ihtiyacınız olmayabilir.\n  // Mevcut dosyanızda `import Categories from \"../components/CategoryList\";` yazıyor, bu da bir component adlandırma hatası olabilir.\n  // Ben Categories'i `CategoryList` olarak düzelttim. Eğer projenizde `Categories` adında bir komponent varsa düzeltmeniz gerekebilir.\n\n  return (\n    <div className=\"container mx-auto p-4 text-white min-h-screen\">\n      {/* CategoryList componentinizi buraya eklediniz, o yüzden yukarıdaki input'u kaldırıyoruz. */}\n      {/* SearchBar Navbar'a taşındığı için buradaki arama input'unu da kaldırabiliriz. */}\n      {/* <div className=\"my-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Ürün ara...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"w-full md:w-1/2 p-2 rounded bg-gray-700 text-white border border-gray-600\"\n        />\n      </div> */}\n\n      <CategoryList onCategorySelect={setCategory} selectedCategory={category} /> {/* selectedCategory prop'u eklendi */}\n\n      <div className=\"flex gap-4 my-4 flex-wrap\">\n        {[\n          { label: \"Tümü\", value: \"\" },\n          { label: \"Kampanyalar\", value: \"campaign\" },\n          { label: \"Çok Satanlar\", value: \"bestseller\" },\n          { label: \"Yeni Ürünler\", value: \"new\" },\n        ].map((btn) => (\n          <button\n            key={btn.value}\n            onClick={() => setFilter(btn.value)}\n            className={getFilterButtonClass(btn.value)}\n          >\n            {btn.label}\n          </button>\n        ))}\n      </div>\n\n      {loading && <p className=\"text-center text-lg mt-10\">Ürünler yükleniyor...</p>}\n      {error && <p className=\"text-center text-red-500 text-lg mt-10\">Hata: {error}</p>}\n      {!loading && !error && products.length === 0 && (\n        <p className=\"text-center text-lg mt-10\">Aradığınız kriterlere uygun ürün bulunamadı.</p>\n      )}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6\">\n        {!loading &&\n          !error &&\n          products.map((product) => <ProductCard key={product._id} product={product} />)}\n      </div>\n    </div>\n  );\n};\n\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}