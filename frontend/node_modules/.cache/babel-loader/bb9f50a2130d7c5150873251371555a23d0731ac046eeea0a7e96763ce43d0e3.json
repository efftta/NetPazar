{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EFTA\\\\Desktop\\\\asdas2\\\\frontend\\\\src\\\\pages\\\\Payment.jsx\",\n  _s = $RefreshSig$();\n// frontend/pages/Payment.jsx\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport { fetchUserAddresses, fetchUserPaymentMethods, addPaymentMethod } from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Payment = () => {\n  _s();\n  const {\n    cartItems,\n    total,\n    clearCart\n  } = useCart();\n  const {\n    token,\n    isAuthenticated,\n    loading: authLoading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\");\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true);\n  const [showNewCardForm, setShowNewCardForm] = useState(false);\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false\n  });\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues,\n    // getValues eklendi\n    trigger,\n    // Manuel olarak form doğrulamasını tetiklemek için\n    formState: {\n      errors\n    },\n    clearErrors // clearErrors eklendi\n  } = useForm({\n    mode: \"onChange\" // Her değişiklikte doğrulamayı tetikler\n  });\n\n  // Kullanıcı ve sepet durumu kontrolü\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", {\n          replace: true\n        });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find(addr => addr.isDefault);\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr);\n          } else if (fetchedAddresses.length > 0) {\n            // Hiç varsayılan yoksa ilkini seç\n            handleAddressSelect(fetchedAddresses[0]);\n          } else {\n            // Hiç adres yoksa, manuel giriş alanlarını boş bırak\n            setSelectedAddress(null);\n            // Form alanlarını sıfırla ve hataları temizle\n            setValue(\"address\", \"\");\n            setValue(\"city\", \"\");\n            setValue(\"postalCode\", \"\");\n            setValue(\"country\", \"\");\n            setValue(\"phone\", \"\");\n            clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n          }\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find(pm => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard);\n          } else if (fetchedPaymentMethods.length > 0) {\n            // Hiç varsayılan yoksa ilkini seç\n            handleSavedCardSelect(fetchedPaymentMethods[0]);\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue, clearErrors]); // clearErrors ve setValue bağımlılık olarak eklendi\n\n  // Adres seçimi veya manuel giriş durumunda form hatalarını yönetir\n  const handleAddressSelect = useCallback(address => {\n    setSelectedAddress(address);\n    if (address) {\n      // Kayıtlı adres seçildiğinde manuel giriş alanlarını sıfırla ve hataları temizle\n      setValue(\"address\", \"\");\n      setValue(\"city\", \"\");\n      setValue(\"postalCode\", \"\");\n      setValue(\"country\", \"\");\n      setValue(\"phone\", \"\");\n      clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n    }\n  }, [setValue, clearErrors]);\n  const handlePaymentMethodTypeSelect = useCallback(method => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false);\n    setVerificationCode(\"\");\n    setCodeError(\"\");\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null);\n      setShowNewCardForm(false); // Kapıda ödeme seçilince yeni kart formunu kapat\n    }\n    // Eğer kredi kartı seçildi ve kayıtlı kart yoksa yeni kart formunu göster\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  }, [paymentMethods]);\n  const handleSavedCardSelect = useCallback(card => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\");\n    setShowNewCardForm(false); // Kayıtlı kart seçilince yeni kart formunu kapat\n  }, []);\n  const handleNewCardInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (!newCardData.cardHolderName || !newCardData.cardNumber || !newCardData.expiryMonth || !newCardData.expiryYear) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault\n      };\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false);\n      setNewCardData({\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(pm => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits);\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const finalizeOrder = async shippingInfo => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map(item => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price\n        })),\n        shippingInfo: shippingInfo,\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName\n          })\n        },\n        totalPrice: total,\n        status: \"pending\" // BURASI DÜZELTİLDİ: \"Beklemede\" yerine \"pending\"\n      };\n      console.log(\"Gönderilen Sipariş Verisi:\", orderData);\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice\n        }\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInitiateOrder = async () => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n    let finalShippingInfo;\n    if (selectedAddress) {\n      // Kayıtlı adres seçiliyse onu kullan\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone\n      };\n    } else {\n      // Kayıtlı adres seçili değilse, manuel giriş alanlarını doğrula\n      // trigger ile formdaki tüm alanları doğrula\n      const isValid = await trigger([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n      if (!isValid) {\n        setErrorMessage(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        toast.error(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        return;\n      }\n      finalShippingInfo = getValues(); // Doğrulanmış form verilerini al\n    }\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard && !showNewCardForm) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      if (showNewCardForm) {\n        // Yeni kart formu açık ve kaydedilmemişse uyarı ver\n        setErrorMessage(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        toast.error(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        return;\n      }\n      setShowVerificationInput(true);\n      return;\n    }\n\n    // Eğer kapıda ödeme seçili ise veya kredi kartı ile ödeme seçili ve onay kodu kısmı geçilmişse\n    await finalizeOrder(finalShippingInfo);\n  };\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") {\n      // Burası gerçek bir entegrasyonda bankadan gelen kodla doğrulanmalı\n      setShowVerificationInput(false);\n      setVerificationCode(\"\");\n      const formData = getValues(); // En güncel form verilerini al\n      let finalShippingInfo;\n      if (selectedAddress) {\n        finalShippingInfo = {\n          address: selectedAddress.address,\n          city: selectedAddress.city,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone\n        };\n      } else {\n        finalShippingInfo = {\n          address: formData.address,\n          city: formData.city,\n          postalCode: formData.postalCode,\n          country: formData.country,\n          phone: formData.phone\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\");\n    }\n  };\n\n  // Sipariş Onayla butonunun disable durumu\n  const isPlaceOrderButtonDisabled = loading || cartItems.length === 0 || selectedAddress === null && (!getValues(\"address\") || !getValues(\"city\") || !getValues(\"postalCode\") || !getValues(\"country\") || !getValues(\"phone\") || Object.keys(errors).length > 0 // Formda hata varsa\n  ) || selectedPaymentMethod === \"creditCard\" && selectedSavedCard === null && !showNewCardForm;\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\",\n      children: cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-red-400\",\n        children: \"Sepetiniz bo\\u015F. L\\xFCtfen \\xF6nce \\xFCr\\xFCn ekleyin.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 44\n        }, this), \"Y\\xFCkleniyor...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-6 text-center text-purple-400\",\n        children: \"Sipari\\u015Fi Tamamla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 bg-gray-700 p-4 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4 text-green-400\",\n          children: [\"Toplam Tutar: \\u20BA\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this), \" \", errorMessage]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(XCircle, {\n          className: \"mr-2\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), \" \", codeError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleInitiateOrder),\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), \" Teslimat Adresi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), addresses.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400 mb-4\",\n            children: \"Kay\\u0131tl\\u0131 adresiniz bulunmamaktad\\u0131r. L\\xFCtfen a\\u015Fa\\u011F\\u0131daki formu doldurun.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n            children: addresses.map(addr => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedAddress && selectedAddress._id === addr._id ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"shippingAddress\",\n                value: addr._id,\n                checked: selectedAddress && selectedAddress._id === addr._id,\n                onChange: () => handleAddressSelect(addr),\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-grow\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-semibold text-lg\",\n                    children: addr.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-300 text-sm\",\n                    children: addr.address\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [addr.city, \", \", addr.postalCode, \", \", addr.country]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400 text-xs\",\n                    children: [\"Tel: \", addr.phone]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 23\n                }, this), addr.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                  children: \"Varsay\\u0131lan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 21\n              }, this)]\n            }, addr._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold mb-3\",\n              children: \"Veya Yeni Adres Bilgilerini Girin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"addressInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Adres\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"addressInput\",\n                  type: \"text\",\n                  ...register(\"address\", {\n                    required: !selectedAddress && \"Adres zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                  // selectedAddress null ise, inputu kontrolsüzden kontrollüye çevirmemek için defaultValue kullanabiliriz.\n                  // Ya da onChange'te selectedAddress'i null yaparak inputu kontrollü tutabiliriz.\n                  // Mevcut haliyle setValue ile kullanıldığında sorun olmamalıdır.\n                  ,\n                  onChange: e => {\n                    setValue(\"address\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null); // Kayıtlı adres seçimi varsa sıfırla\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 19\n                }, this), errors.address && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.address.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"cityInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\u015Eehir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"cityInput\",\n                  type: \"text\",\n                  ...register(\"city\", {\n                    required: !selectedAddress && \"Şehir zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"city\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 19\n                }, this), errors.city && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.city.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"postalCodeInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Posta Kodu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"postalCodeInput\",\n                  type: \"text\",\n                  ...register(\"postalCode\", {\n                    required: !selectedAddress && \"Posta kodu zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"postalCode\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 19\n                }, this), errors.postalCode && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.postalCode.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"countryInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"\\xDClke\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"countryInput\",\n                  type: \"text\",\n                  ...register(\"country\", {\n                    required: !selectedAddress && \"Ülke zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"country\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 19\n                }, this), errors.country && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.country.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"phoneInput\",\n                  className: \"block text-sm font-medium text-gray-300\",\n                  children: \"Telefon Numaras\\u0131\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"phoneInput\",\n                  type: \"text\",\n                  ...register(\"phone\", {\n                    required: !selectedAddress && \"Telefon numarası zorunludur.\"\n                  }),\n                  className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\",\n                  onChange: e => {\n                    setValue(\"phone\", e.target.value);\n                    if (selectedAddress) setSelectedAddress(null);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 19\n                }, this), errors.phone && !selectedAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-400\",\n                  children: errors.phone.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 15\n            }, this), \" \\xD6deme Y\\xF6ntemi Se\\xE7in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"cashOnDelivery\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"cashOnDelivery\",\n                checked: selectedPaymentMethod === \"cashOnDelivery\",\n                onChange: () => handlePaymentMethodTypeSelect(\"cashOnDelivery\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kap\\u0131da \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"\\xDCr\\xFCnleri teslim al\\u0131rken nakit veya kart ile \\xF6deme yapabilirsiniz.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `block p-4 border rounded-md cursor-pointer transition-colors ${selectedPaymentMethod === \"creditCard\" ? \"border-green-500 ring-2 ring-green-500 bg-green-900\" : \"border-gray-600 hover:border-gray-400 bg-gray-700\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"paymentMethodOption\",\n                value: \"creditCard\",\n                checked: selectedPaymentMethod === \"creditCard\",\n                onChange: () => handlePaymentMethodTypeSelect(\"creditCard\"),\n                className: \"mr-2 hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-lg\",\n                children: \"Kredi Kart\\u0131 ile \\xD6deme\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-300 text-sm\",\n                children: \"Kaydedilmi\\u015F kartlar\\u0131n\\u0131zdan birini se\\xE7in veya yeni bir kart ekleyin.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this), selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold mb-3\",\n                children: \"Kay\\u0131tl\\u0131 Kartlar\\u0131m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 19\n              }, this), paymentMethods.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-400 text-sm mb-4\",\n                children: \"Hen\\xFCz kay\\u0131tl\\u0131 kart\\u0131n\\u0131z bulunmamaktad\\u0131r.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 gap-3 mb-4\",\n                children: paymentMethods.map(card => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `flex items-center p-3 border rounded-md cursor-pointer ${selectedSavedCard && selectedSavedCard._id === card._id ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\" : \"border-gray-500 hover:border-gray-400 bg-gray-600\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"savedCard\",\n                    value: card._id,\n                    checked: selectedSavedCard && selectedSavedCard._id === card._id,\n                    onChange: () => handleSavedCardSelect(card),\n                    className: \"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-grow\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: [card.cardHolderName, \" (\", card.cardType || \"Kart\", \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 614,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-300\",\n                      children: [\"**** **** **** \", card.cardNumberLast4]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 615,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-400\",\n                      children: [\"Son Kullanma: \", card.expiryMonth, \"/\", card.expiryYear]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 616,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 27\n                  }, this), card.isDefault && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\",\n                    children: \"Varsay\\u0131lan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 619,\n                    columnNumber: 29\n                  }, this)]\n                }, card._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowNewCardForm(!showNewCardForm);\n                  setSelectedSavedCard(null); // Yeni kart formu açılırken seçili kartı sıfırla\n                },\n                className: \"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                  size: 18,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 21\n                }, this), showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 19\n              }, this), showNewCardForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-md font-semibold mb-3\",\n                  children: \"Yeni Kart Bilgileri\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardHolderName\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart \\xDCzerindeki \\u0130sim\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardHolderName\",\n                      name: \"cardHolderName\",\n                      value: newCardData.cardHolderName,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 646,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cardNumber\",\n                      className: \"block text-sm font-medium text-gray-300\",\n                      children: \"Kart Numaras\\u0131\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 649,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"cardNumber\",\n                      name: \"cardNumber\",\n                      value: newCardData.cardNumber,\n                      onChange: handleNewCardInputChange,\n                      className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                      required: true,\n                      maxLength: \"16\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 650,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryMonth\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Ay (AA)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 654,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryMonth\",\n                        name: \"expiryMonth\",\n                        value: newCardData.expiryMonth,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"MM\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 655,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"expiryYear\",\n                        className: \"block text-sm font-medium text-gray-300\",\n                        children: \"Y\\u0131l (YY)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 658,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"expiryYear\",\n                        name: \"expiryYear\",\n                        value: newCardData.expiryYear,\n                        onChange: handleNewCardInputChange,\n                        className: \"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\",\n                        placeholder: \"YY\",\n                        required: true,\n                        maxLength: \"2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 659,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 657,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center mt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"isDefaultCard\",\n                      name: \"isDefault\",\n                      checked: newCardData.isDefault,\n                      onChange: handleNewCardInputChange,\n                      className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 663,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"isDefaultCard\",\n                      className: \"ml-2 block text-sm font-medium text-gray-300\",\n                      children: \"Varsay\\u0131lan Kart Yap\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: handleSaveNewCard,\n                    disabled: loading,\n                    className: `w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`,\n                    children: [loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 667,\n                      columnNumber: 38\n                    }, this) : /*#__PURE__*/_jsxDEV(PenTool, {\n                      className: \"mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 667,\n                      columnNumber: 82\n                    }, this), \" Kart\\u0131 Kaydet\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 666,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this), showVerificationInput && selectedPaymentMethod === \"creditCard\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 17\n            }, this), \" Kredi Kart\\u0131 G\\xFCvenlik Onay\\u0131\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300 mb-4\",\n            children: \"G\\xFCvenli\\u011Finiz i\\xE7in, kredi kart\\u0131 sahibinin kay\\u0131tl\\u0131 telefon numaras\\u0131na g\\xF6nderilen 4 haneli kodu giriniz.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            maxLength: \"4\",\n            value: verificationCode,\n            onChange: e => setVerificationCode(e.target.value),\n            placeholder: \"Onay Kodu (\\xF6rn: 1234)\",\n            className: \"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\",\n            inputMode: \"numeric\",\n            pattern: \"[0-9]*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this), codeError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-sm text-orange-400 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"mr-1\",\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 19\n            }, this), \" \", codeError]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleVerifyCode,\n            className: \"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\",\n            disabled: loading || verificationCode.length !== 4,\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 21\n              }, this), \" Do\\u011Frulan\\u0131yor...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 21\n              }, this), \" Kodu Do\\u011Frula ve Sipari\\u015Fi Onayla\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 13\n        }, this), !showVerificationInput && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isPlaceOrderButtonDisabled // Yeni disabled prop'u kullanıldı\n          ,\n          className: `w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${isPlaceOrderButtonDisabled ? \"bg-gray-600 cursor-not-allowed\" : \"bg-green-600 hover:bg-green-700\"}`,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 19\n            }, this), \" Sipari\\u015F Veriliyor...\"]\n          }, void 0, true) : \"Siparişi Onayla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/cart\"),\n        className: \"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"mr-2\",\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 11\n        }, this), \" Sepete Geri D\\xF6n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"3iudSNeC3u3MPtjcpVKQyhO4Jp8=\", false, function () {\n  return [useCart, useAuth, useNavigate, useForm];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useCart","useAuth","createOrder","fetchUserAddresses","fetchUserPaymentMethods","addPaymentMethod","useForm","MapPin","CreditCard","Loader2","PlusCircle","PenTool","CheckCircle","XCircle","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","Payment","_s","cartItems","total","clearCart","token","isAuthenticated","loading","authLoading","navigate","addresses","setAddresses","paymentMethods","setPaymentMethods","selectedAddress","setSelectedAddress","selectedPaymentMethod","setSelectedPaymentMethod","selectedSavedCard","setSelectedSavedCard","setLoading","errorMessage","setErrorMessage","fetchingData","setFetchingData","showNewCardForm","setShowNewCardForm","newCardData","setNewCardData","cardHolderName","cardNumber","expiryMonth","expiryYear","isDefault","showVerificationInput","setShowVerificationInput","verificationCode","setVerificationCode","codeError","setCodeError","register","handleSubmit","setValue","getValues","trigger","formState","errors","clearErrors","mode","replace","length","info","fetchData","fetchedAddresses","defaultAddr","find","addr","handleAddressSelect","fetchedPaymentMethods","defaultCard","pm","handleSavedCardSelect","err","console","error","message","address","handlePaymentMethodTypeSelect","method","card","handleNewCardInputChange","e","name","value","type","checked","target","handleSaveNewCard","cardType","test","cardToSave","updatedPaymentMethods","success","last4Digits","slice","newlyAddedCard","cardNumberLast4","finalizeOrder","shippingInfo","orderData","products","map","item","product","_id","quantity","price","discountPrice","paymentMethod","cardId","last4","totalPrice","status","log","createdOrder","state","orderId","handleInitiateOrder","finalShippingInfo","city","postalCode","country","phone","isValid","handleVerifyCode","formData","isPlaceOrderButtonDisabled","Object","keys","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","size","onSubmit","onChange","title","htmlFor","id","required","onClick","maxLength","placeholder","disabled","inputMode","pattern","_c","$RefreshReg$"],"sources":["C:/Users/EFTA/Desktop/asdas2/frontend/src/pages/Payment.jsx"],"sourcesContent":["// frontend/pages/Payment.jsx\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createOrder } from \"../api/orderApi\";\nimport {\n  fetchUserAddresses,\n  fetchUserPaymentMethods,\n  addPaymentMethod,\n} from \"../api/userApi\";\nimport { useForm } from \"react-hook-form\";\nimport { MapPin, CreditCard, Loader2, PlusCircle, PenTool, CheckCircle, XCircle } from \"lucide-react\";\nimport { toast } from \"react-toastify\";\n\nconst Payment = () => {\n  const { cartItems, total, clearCart } = useCart();\n  const { token, isAuthenticated, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const [addresses, setAddresses] = useState([]);\n  const [paymentMethods, setPaymentMethods] = useState([]);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(\"cashOnDelivery\");\n  const [selectedSavedCard, setSelectedSavedCard] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [fetchingData, setFetchingData] = useState(true);\n\n  const [showNewCardForm, setShowNewCardForm] = useState(false);\n  const [newCardData, setNewCardData] = useState({\n    cardHolderName: \"\",\n    cardNumber: \"\",\n    expiryMonth: \"\",\n    expiryYear: \"\",\n    isDefault: false,\n  });\n\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [codeError, setCodeError] = useState(\"\");\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    getValues, // getValues eklendi\n    trigger, // Manuel olarak form doğrulamasını tetiklemek için\n    formState: { errors },\n    clearErrors, // clearErrors eklendi\n  } = useForm({\n    mode: \"onChange\", // Her değişiklikte doğrulamayı tetikler\n  });\n\n  // Kullanıcı ve sepet durumu kontrolü\n  useEffect(() => {\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        navigate(\"/login\", { replace: true });\n        return;\n      }\n      if (cartItems.length === 0) {\n        setErrorMessage(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n        toast.info(\"Sepetiniz boş. Lütfen önce ürün ekleyin.\");\n      }\n    }\n  }, [authLoading, isAuthenticated, cartItems, navigate]);\n\n  // Kullanıcı adreslerini ve ödeme yöntemlerini çekme\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated && token && cartItems.length > 0) {\n        setFetchingData(true);\n        try {\n          const fetchedAddresses = await fetchUserAddresses(token);\n          setAddresses(fetchedAddresses);\n          const defaultAddr = fetchedAddresses.find((addr) => addr.isDefault);\n          if (defaultAddr) {\n            handleAddressSelect(defaultAddr);\n          } else if (fetchedAddresses.length > 0) {\n            // Hiç varsayılan yoksa ilkini seç\n            handleAddressSelect(fetchedAddresses[0]);\n          } else {\n            // Hiç adres yoksa, manuel giriş alanlarını boş bırak\n            setSelectedAddress(null);\n            // Form alanlarını sıfırla ve hataları temizle\n            setValue(\"address\", \"\");\n            setValue(\"city\", \"\");\n            setValue(\"postalCode\", \"\");\n            setValue(\"country\", \"\");\n            setValue(\"phone\", \"\");\n            clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n          }\n\n          const fetchedPaymentMethods = await fetchUserPaymentMethods(token);\n          setPaymentMethods(fetchedPaymentMethods);\n          const defaultCard = fetchedPaymentMethods.find((pm) => pm.isDefault);\n          if (defaultCard) {\n            handleSavedCardSelect(defaultCard);\n          } else if (fetchedPaymentMethods.length > 0) {\n            // Hiç varsayılan yoksa ilkini seç\n            handleSavedCardSelect(fetchedPaymentMethods[0]);\n          }\n        } catch (err) {\n          console.error(\"Kullanıcı verileri çekilirken hata:\", err);\n          setErrorMessage(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n          toast.error(err.message || \"Bilgileriniz yüklenirken bir hata oluştu.\");\n        } finally {\n          setFetchingData(false);\n        }\n      }\n    };\n    fetchData();\n  }, [isAuthenticated, token, cartItems, setValue, clearErrors]); // clearErrors ve setValue bağımlılık olarak eklendi\n\n  // Adres seçimi veya manuel giriş durumunda form hatalarını yönetir\n  const handleAddressSelect = useCallback((address) => {\n    setSelectedAddress(address);\n    if (address) {\n      // Kayıtlı adres seçildiğinde manuel giriş alanlarını sıfırla ve hataları temizle\n      setValue(\"address\", \"\");\n      setValue(\"city\", \"\");\n      setValue(\"postalCode\", \"\");\n      setValue(\"country\", \"\");\n      setValue(\"phone\", \"\");\n      clearErrors([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n    }\n  }, [setValue, clearErrors]);\n\n  const handlePaymentMethodTypeSelect = useCallback((method) => {\n    setSelectedPaymentMethod(method);\n    setShowVerificationInput(false);\n    setVerificationCode(\"\");\n    setCodeError(\"\");\n\n    if (method === \"cashOnDelivery\") {\n      setSelectedSavedCard(null);\n      setShowNewCardForm(false); // Kapıda ödeme seçilince yeni kart formunu kapat\n    }\n    // Eğer kredi kartı seçildi ve kayıtlı kart yoksa yeni kart formunu göster\n    if (method === \"creditCard\" && paymentMethods.length === 0) {\n      setShowNewCardForm(true);\n    }\n  }, [paymentMethods]);\n\n  const handleSavedCardSelect = useCallback((card) => {\n    setSelectedSavedCard(card);\n    setSelectedPaymentMethod(\"creditCard\");\n    setShowNewCardForm(false); // Kayıtlı kart seçilince yeni kart formunu kapat\n  }, []);\n\n  const handleNewCardInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setNewCardData({\n      ...newCardData,\n      [name]: type === \"checkbox\" ? checked : value,\n    });\n  };\n\n  const handleSaveNewCard = async () => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      if (\n        !newCardData.cardHolderName ||\n        !newCardData.cardNumber ||\n        !newCardData.expiryMonth ||\n        !newCardData.expiryYear\n      ) {\n        setErrorMessage(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        toast.error(\"Lütfen tüm kart bilgilerini eksiksiz girin.\");\n        setLoading(false);\n        return;\n      }\n\n      let cardType = \"Unknown\";\n      if (/^4/.test(newCardData.cardNumber)) cardType = \"Visa\";\n      else if (/^5[1-5]/.test(newCardData.cardNumber)) cardType = \"MasterCard\";\n      else if (/^3[47]/.test(newCardData.cardNumber)) cardType = \"Amex\";\n\n      const cardToSave = {\n        cardHolderName: newCardData.cardHolderName,\n        cardNumber: newCardData.cardNumber,\n        expiryMonth: newCardData.expiryMonth,\n        expiryYear: newCardData.expiryYear,\n        cardType: cardType,\n        isDefault: newCardData.isDefault,\n      };\n\n      const updatedPaymentMethods = await addPaymentMethod(cardToSave, token);\n      setPaymentMethods(updatedPaymentMethods);\n      setShowNewCardForm(false);\n      setNewCardData({\n        cardHolderName: \"\",\n        cardNumber: \"\",\n        expiryMonth: \"\",\n        expiryYear: \"\",\n        isDefault: false,\n      });\n      toast.success(\"Yeni kart başarıyla eklendi!\");\n\n      const last4Digits = newCardData.cardNumber.slice(-4);\n      const newlyAddedCard = updatedPaymentMethods.find(\n        (pm) => pm.cardHolderName === cardToSave.cardHolderName && pm.cardNumberLast4 === last4Digits\n      );\n      if (newlyAddedCard) {\n        handleSavedCardSelect(newlyAddedCard);\n      }\n    } catch (err) {\n      console.error(\"Yeni kart ekleme hatası:\", err);\n      setErrorMessage(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n      toast.error(err.message || \"Yeni kart eklenirken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const finalizeOrder = async (shippingInfo) => {\n    setLoading(true);\n    setErrorMessage(\"\");\n    try {\n      const orderData = {\n        products: cartItems.map((item) => ({\n          product: item._id,\n          quantity: item.quantity,\n          price: item.discountPrice || item.price,\n        })),\n        shippingInfo: shippingInfo,\n        paymentMethod: {\n          type: selectedPaymentMethod,\n          ...(selectedPaymentMethod === \"creditCard\" && selectedSavedCard && {\n            cardId: selectedSavedCard._id,\n            last4: selectedSavedCard.cardNumberLast4,\n            cardHolderName: selectedSavedCard.cardHolderName,\n          }),\n        },\n        totalPrice: total,\n        status: \"pending\", // BURASI DÜZELTİLDİ: \"Beklemede\" yerine \"pending\"\n      };\n\n      console.log(\"Gönderilen Sipariş Verisi:\", orderData);\n\n      const createdOrder = await createOrder(orderData, token);\n      clearCart();\n      toast.success(\"Siparişiniz başarıyla oluşturuldu!\");\n      navigate(\"/order-success\", {\n        state: {\n          orderId: createdOrder._id,\n          totalPrice: createdOrder.totalPrice,\n        },\n      });\n    } catch (error) {\n      console.error(\"Sipariş oluşturma hatası:\", error);\n      setErrorMessage(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n      toast.error(error.message || \"Sipariş oluşturulurken bir hata oluştu.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInitiateOrder = async () => {\n    setErrorMessage(\"\");\n    setCodeError(\"\");\n\n    if (!token) {\n      setErrorMessage(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      toast.error(\"Sipariş oluşturmak için lütfen giriş yapın.\");\n      return;\n    }\n\n    let finalShippingInfo;\n    if (selectedAddress) {\n      // Kayıtlı adres seçiliyse onu kullan\n      finalShippingInfo = {\n        address: selectedAddress.address,\n        city: selectedAddress.city,\n        postalCode: selectedAddress.postalCode,\n        country: selectedAddress.country,\n        phone: selectedAddress.phone,\n      };\n    } else {\n      // Kayıtlı adres seçili değilse, manuel giriş alanlarını doğrula\n      // trigger ile formdaki tüm alanları doğrula\n      const isValid = await trigger([\"address\", \"city\", \"postalCode\", \"country\", \"phone\"]);\n      if (!isValid) {\n        setErrorMessage(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        toast.error(\"Lütfen tüm adres bilgilerini eksiksiz ve doğru girin.\");\n        return;\n      }\n      finalShippingInfo = getValues(); // Doğrulanmış form verilerini al\n    }\n\n    if (selectedPaymentMethod === \"creditCard\") {\n      if (!selectedSavedCard && !showNewCardForm) {\n        setErrorMessage(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        toast.error(\"Lütfen bir kayıtlı kart seçin veya yeni bir kart ekleyin.\");\n        return;\n      }\n      if (showNewCardForm) {\n        // Yeni kart formu açık ve kaydedilmemişse uyarı ver\n        setErrorMessage(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        toast.error(\"Lütfen yeni kart bilgilerinizi kaydedin veya kayıtlı bir kart seçin.\");\n        return;\n      }\n      setShowVerificationInput(true);\n      return;\n    }\n\n    // Eğer kapıda ödeme seçili ise veya kredi kartı ile ödeme seçili ve onay kodu kısmı geçilmişse\n    await finalizeOrder(finalShippingInfo);\n  };\n\n  const handleVerifyCode = async () => {\n    setCodeError(\"\");\n    if (verificationCode === \"1234\") { // Burası gerçek bir entegrasyonda bankadan gelen kodla doğrulanmalı\n      setShowVerificationInput(false);\n      setVerificationCode(\"\");\n\n      const formData = getValues(); // En güncel form verilerini al\n      let finalShippingInfo;\n\n      if (selectedAddress) {\n        finalShippingInfo = {\n          address: selectedAddress.address,\n          city: selectedAddress.city,\n          postalCode: selectedAddress.postalCode,\n          country: selectedAddress.country,\n          phone: selectedAddress.phone,\n        };\n      } else {\n        finalShippingInfo = {\n          address: formData.address,\n          city: formData.city,\n          postalCode: formData.postalCode,\n          country: formData.country,\n          phone: formData.phone,\n        };\n      }\n      await finalizeOrder(finalShippingInfo);\n    } else {\n      setCodeError(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      toast.error(\"Hatalı onay kodu. Lütfen tekrar deneyin.\");\n      setVerificationCode(\"\");\n    }\n  };\n\n  // Sipariş Onayla butonunun disable durumu\n  const isPlaceOrderButtonDisabled =\n    loading ||\n    cartItems.length === 0 ||\n    (selectedAddress === null && (\n      !getValues(\"address\") ||\n      !getValues(\"city\") ||\n      !getValues(\"postalCode\") ||\n      !getValues(\"country\") ||\n      !getValues(\"phone\") ||\n      Object.keys(errors).length > 0 // Formda hata varsa\n    )) ||\n    (selectedPaymentMethod === \"creditCard\" && selectedSavedCard === null && !showNewCardForm);\n\n\n  if (authLoading || fetchingData || cartItems.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-center\">\n        {cartItems.length === 0 ? (\n          <p className=\"text-center text-red-400\">Sepetiniz boş. Lütfen önce ürün ekleyin.</p>\n        ) : (\n          <p className=\"flex items-center\"><Loader2 className=\"animate-spin mr-2\" />Yükleniyor...</p>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-6 flex justify-center items-start\">\n      <div className=\"bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-purple-400\">Siparişi Tamamla</h1>\n\n        <div className=\"mb-6 bg-gray-700 p-4 rounded-lg\">\n          <h2 className=\"text-2xl font-semibold mb-4 text-green-400\">\n            Toplam Tutar: ₺{total.toFixed(2)}\n          </h2>\n        </div>\n\n        {errorMessage && (\n          <p className=\"mt-4 text-center text-red-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {errorMessage}\n          </p>\n        )}\n        {codeError && (\n          <p className=\"mt-4 text-center text-orange-400 mb-4 flex items-center justify-center\">\n            <XCircle className=\"mr-2\" size={20} /> {codeError}\n          </p>\n        )}\n\n        {/* handleSubmit'e handleInitiateOrder verildi */}\n        <form onSubmit={handleSubmit(handleInitiateOrder)} className=\"space-y-6\">\n          {/* Adres Seçimi Bölümü */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <MapPin className=\"mr-2\" /> Teslimat Adresi Seçin\n            </h2>\n            {addresses.length === 0 ? (\n              <p className=\"text-gray-400 mb-4\">Kayıtlı adresiniz bulunmamaktadır. Lütfen aşağıdaki formu doldurun.</p>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {addresses.map((addr) => (\n                  <label\n                    key={addr._id}\n                    className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                      selectedAddress && selectedAddress._id === addr._id\n                        ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                        : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"shippingAddress\"\n                      value={addr._id}\n                      checked={selectedAddress && selectedAddress._id === addr._id}\n                      onChange={() => handleAddressSelect(addr)}\n                      className=\"hidden\"\n                    />\n                    <div className=\"flex items-start\">\n                      <div className=\"flex-grow\">\n                        <p className=\"font-semibold text-lg\">{addr.title}</p>\n                        <p className=\"text-gray-300 text-sm\">{addr.address}</p>\n                        <p className=\"text-gray-400 text-xs\">{addr.city}, {addr.postalCode}, {addr.country}</p>\n                        <p className=\"text-gray-400 text-xs\">Tel: {addr.phone}</p>\n                      </div>\n                      {addr.isDefault && (\n                        <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                          Varsayılan\n                        </span>\n                      )}\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            <div className=\"mt-6 p-4 border border-gray-600 rounded-md bg-gray-700\">\n              <h3 className=\"text-lg font-semibold mb-3\">Veya Yeni Adres Bilgilerini Girin</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label htmlFor=\"addressInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Adres\n                  </label>\n                  <input\n                    id=\"addressInput\"\n                    type=\"text\"\n                    {...register(\"address\", { required: !selectedAddress && \"Adres zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    // selectedAddress null ise, inputu kontrolsüzden kontrollüye çevirmemek için defaultValue kullanabiliriz.\n                    // Ya da onChange'te selectedAddress'i null yaparak inputu kontrollü tutabiliriz.\n                    // Mevcut haliyle setValue ile kullanıldığında sorun olmamalıdır.\n                    onChange={(e) => {\n                        setValue(\"address\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null); // Kayıtlı adres seçimi varsa sıfırla\n                    }}\n                  />\n                  {errors.address && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.address.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"cityInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Şehir\n                  </label>\n                  <input\n                    id=\"cityInput\"\n                    type=\"text\"\n                    {...register(\"city\", { required: !selectedAddress && \"Şehir zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"city\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.city && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.city.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"postalCodeInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Posta Kodu\n                  </label>\n                  <input\n                    id=\"postalCodeInput\"\n                    type=\"text\"\n                    {...register(\"postalCode\", { required: !selectedAddress && \"Posta kodu zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"postalCode\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.postalCode && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.postalCode.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"countryInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Ülke\n                  </label>\n                  <input\n                    id=\"countryInput\"\n                    type=\"text\"\n                    {...register(\"country\", { required: !selectedAddress && \"Ülke zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"country\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.country && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.country.message}</p>\n                  )}\n                </div>\n                <div>\n                  <label htmlFor=\"phoneInput\" className=\"block text-sm font-medium text-gray-300\">\n                    Telefon Numarası\n                  </label>\n                  <input\n                    id=\"phoneInput\"\n                    type=\"text\"\n                    {...register(\"phone\", { required: !selectedAddress && \"Telefon numarası zorunludur.\" })}\n                    className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 text-white\"\n                    onChange={(e) => {\n                        setValue(\"phone\", e.target.value);\n                        if (selectedAddress) setSelectedAddress(null);\n                    }}\n                  />\n                  {errors.phone && !selectedAddress && (\n                    <p className=\"mt-1 text-sm text-red-400\">{errors.phone.message}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Ödeme Yöntemi Seçimi Bölümü */}\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold mb-3 flex items-center\">\n              <CreditCard className=\"mr-2\" /> Ödeme Yöntemi Seçin\n            </h2>\n            <div className=\"space-y-3\">\n              {/* Kapıda Ödeme Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"cashOnDelivery\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"cashOnDelivery\"\n                  checked={selectedPaymentMethod === \"cashOnDelivery\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"cashOnDelivery\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kapıda Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Ürünleri teslim alırken nakit veya kart ile ödeme yapabilirsiniz.</p>\n              </label>\n\n              {/* Kayıtlı Kartlar Seçeneği */}\n              <label\n                className={`block p-4 border rounded-md cursor-pointer transition-colors ${\n                  selectedPaymentMethod === \"creditCard\"\n                    ? \"border-green-500 ring-2 ring-green-500 bg-green-900\"\n                    : \"border-gray-600 hover:border-gray-400 bg-gray-700\"\n                }`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"paymentMethodOption\"\n                  value=\"creditCard\"\n                  checked={selectedPaymentMethod === \"creditCard\"}\n                  onChange={() => handlePaymentMethodTypeSelect(\"creditCard\")}\n                  className=\"mr-2 hidden\"\n                />\n                <span className=\"font-semibold text-lg\">Kredi Kartı ile Ödeme</span>\n                <p className=\"text-gray-300 text-sm\">Kaydedilmiş kartlarınızdan birini seçin veya yeni bir kart ekleyin.</p>\n              </label>\n\n              {selectedPaymentMethod === \"creditCard\" && (\n                <div className=\"mt-4 p-4 border border-gray-600 rounded-md bg-gray-700\">\n                  <h3 className=\"text-lg font-semibold mb-3\">Kayıtlı Kartlarım</h3>\n                  {paymentMethods.length === 0 ? (\n                    <p className=\"text-gray-400 text-sm mb-4\">Henüz kayıtlı kartınız bulunmamaktadır.</p>\n                  ) : (\n                    <div className=\"grid grid-cols-1 gap-3 mb-4\">\n                      {paymentMethods.map((card) => (\n                        <label\n                          key={card._id}\n                          className={`flex items-center p-3 border rounded-md cursor-pointer ${\n                            selectedSavedCard && selectedSavedCard._id === card._id\n                              ? \"border-blue-500 ring-1 ring-blue-500 bg-blue-900\"\n                              : \"border-gray-500 hover:border-gray-400 bg-gray-600\"\n                          }`}\n                        >\n                          <input\n                            type=\"radio\"\n                            name=\"savedCard\"\n                            value={card._id}\n                            checked={selectedSavedCard && selectedSavedCard._id === card._id}\n                            onChange={() => handleSavedCardSelect(card)}\n                            className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                          />\n                          <div className=\"flex-grow\">\n                            <p className=\"font-medium\">{card.cardHolderName} ({card.cardType || \"Kart\"})</p>\n                            <p className=\"text-sm text-gray-300\">**** **** **** {card.cardNumberLast4}</p>\n                            <p className=\"text-xs text-gray-400\">Son Kullanma: {card.expiryMonth}/{card.expiryYear}</p>\n                          </div>\n                          {card.isDefault && (\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full\">\n                              Varsayılan\n                            </span>\n                          )}\n                        </label>\n                      ))}\n                    </div>\n                  )}\n\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                        setShowNewCardForm(!showNewCardForm);\n                        setSelectedSavedCard(null); // Yeni kart formu açılırken seçili kartı sıfırla\n                    }}\n                    className=\"w-full mt-2 py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-md flex items-center justify-center transition-colors\"\n                  >\n                    <PlusCircle size={18} className=\"mr-2\" />\n                    {showNewCardForm ? \"Yeni Kart Ekleme Formunu Kapat\" : \"Yeni Kart Ekle\"}\n                  </button>\n\n                  {showNewCardForm && (\n                    <div className=\"mt-4 p-4 border border-gray-500 rounded-md bg-gray-700\">\n                      <h4 className=\"text-md font-semibold mb-3\">Yeni Kart Bilgileri</h4>\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <div>\n                          <label htmlFor=\"cardHolderName\" className=\"block text-sm font-medium text-gray-300\">Kart Üzerindeki İsim</label>\n                          <input type=\"text\" id=\"cardHolderName\" name=\"cardHolderName\" value={newCardData.cardHolderName} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required />\n                        </div>\n                        <div>\n                          <label htmlFor=\"cardNumber\" className=\"block text-sm font-medium text-gray-300\">Kart Numarası</label>\n                          <input type=\"text\" id=\"cardNumber\" name=\"cardNumber\" value={newCardData.cardNumber} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" required maxLength=\"16\" />\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <div>\n                            <label htmlFor=\"expiryMonth\" className=\"block text-sm font-medium text-gray-300\">Ay (AA)</label>\n                            <input type=\"text\" id=\"expiryMonth\" name=\"expiryMonth\" value={newCardData.expiryMonth} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"MM\" required maxLength=\"2\" />\n                          </div>\n                          <div>\n                            <label htmlFor=\"expiryYear\" className=\"block text-sm font-medium text-gray-300\">Yıl (YY)</label>\n                            <input type=\"text\" id=\"expiryYear\" name=\"expiryYear\" value={newCardData.expiryYear} onChange={handleNewCardInputChange} className=\"mt-1 block w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md\" placeholder=\"YY\" required maxLength=\"2\" />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center mt-2\">\n                          <input type=\"checkbox\" id=\"isDefaultCard\" name=\"isDefault\" checked={newCardData.isDefault} onChange={handleNewCardInputChange} className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded\" />\n                          <label htmlFor=\"isDefaultCard\" className=\"ml-2 block text-sm font-medium text-gray-300\">Varsayılan Kart Yap</label>\n                        </div>\n                        <button type=\"button\" onClick={handleSaveNewCard} disabled={loading} className={`w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center transition-colors ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}>\n                          {loading ? <Loader2 className=\"animate-spin mr-2\" /> : <PenTool className=\"mr-2\" />} Kartı Kaydet\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {showVerificationInput && selectedPaymentMethod === \"creditCard\" && (\n            <div className=\"mb-8 p-6 bg-gray-700 rounded-lg shadow-inner text-center\">\n              <h3 className=\"text-xl font-semibold mb-4 text-orange-300 flex items-center justify-center\">\n                <CreditCard className=\"mr-2\" /> Kredi Kartı Güvenlik Onayı\n              </h3>\n              <p className=\"text-gray-300 mb-4\">\n                Güvenliğiniz için, kredi kartı sahibinin kayıtlı telefon numarasına gönderilen 4 haneli kodu giriniz.\n              </p>\n              <input\n                type=\"text\"\n                maxLength=\"4\"\n                value={verificationCode}\n                onChange={(e) => setVerificationCode(e.target.value)}\n                placeholder=\"Onay Kodu (örn: 1234)\"\n                className=\"w-full p-3 rounded-md bg-gray-900 text-white border border-gray-600 focus:border-purple-500 focus:ring focus:ring-purple-500 focus:ring-opacity-50 transition-all text-center text-2xl tracking-widest\"\n                inputMode=\"numeric\"\n                pattern=\"[0-9]*\"\n              />\n              {codeError && (\n                <p className=\"mt-2 text-sm text-orange-400 flex items-center justify-center\">\n                  <XCircle className=\"mr-1\" size={16} /> {codeError}\n                </p>\n              )}\n              <button\n                type=\"button\"\n                onClick={handleVerifyCode}\n                className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl transition-colors duration-300 flex items-center justify-center\"\n                disabled={loading || verificationCode.length !== 4}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"animate-spin mr-2\" /> Doğrulanıyor...\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle className=\"mr-2\" /> Kodu Doğrula ve Siparişi Onayla\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n\n          {/* Sipariş Onayla Butonu - Sadece onay kodu ekranı açık değilse görünür */}\n          {!showVerificationInput && (\n            <button\n              type=\"submit\"\n              disabled={isPlaceOrderButtonDisabled} // Yeni disabled prop'u kullanıldı\n              className={`w-full py-3 px-4 rounded-md text-lg font-semibold transition-colors flex items-center justify-center ${\n                isPlaceOrderButtonDisabled\n                  ? \"bg-gray-600 cursor-not-allowed\"\n                  : \"bg-green-600 hover:bg-green-700\"\n              }`}\n            >\n              {loading ? (\n                <>\n                  <Loader2 className=\"animate-spin mr-2\" /> Sipariş Veriliyor...\n                </>\n              ) : (\n                \"Siparişi Onayla\"\n              )}\n            </button>\n          )}\n        </form>\n\n        <button\n          onClick={() => navigate(\"/cart\")}\n          className=\"mt-6 w-full flex items-center justify-center text-gray-400 hover:text-white transition-colors py-2 px-4 rounded-md border border-gray-700 hover:border-gray-500\"\n        >\n          <Loader2 className=\"mr-2\" size={18} /> Sepete Geri Dön\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}